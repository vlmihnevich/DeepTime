<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>History of Life on Earth</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&display=swap" rel="stylesheet">
  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=i(r);fetch(r.href,a)}})();function $t(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ui(t){let e,i,n;t.length!==2?(e=$t,i=(s,l)=>$t(t(s),l),n=(s,l)=>t(s)-l):(e=t===$t||t===Wi?t:Gi,i=t,n=t);function r(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;i(s[h],l)<0?u=h+1:c=h}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;i(s[h],l)<=0?u=h+1:c=h}while(u<c)}return u}function o(s,l,u=0,c=s.length){const h=r(s,l,u,c-1);return h>u&&n(s[h-1],l)>-n(s[h],l)?h-1:h}return{left:r,center:o,right:a}}function Gi(){return 0}function Xi(t){return t===null?NaN:+t}const Vi=ui($t),Ki=Vi.right;ui(Xi).center;const Ji=Math.sqrt(50),Zi=Math.sqrt(10),Qi=Math.sqrt(2);function Ht(t,e,i){const n=(e-t)/Math.max(0,i),r=Math.floor(Math.log10(n)),a=n/Math.pow(10,r),o=a>=Ji?10:a>=Zi?5:a>=Qi?2:1;let s,l,u;return r<0?(u=Math.pow(10,-r)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=i&&i<2?Ht(t,e,i*2):[s,l,u]}function ji(t,e,i){if(e=+e,t=+t,i=+i,!(i>0))return[];if(t===e)return[t];const n=e<t,[r,a,o]=n?Ht(e,t,i):Ht(t,e,i);if(!(a>=r))return[];const s=a-r+1,l=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(r+u)/-o;else for(let u=0;u<s;++u)l[u]=(r+u)*o;return l}function ae(t,e,i){return e=+e,t=+t,i=+i,Ht(t,e,i)[2]}function tn(t,e,i){e=+e,t=+t,i=+i;const n=e<t,r=n?ae(e,t,i):ae(t,e,i);return(n?-1:1)*(r<0?1/-r:r)}function en(t){return t}var nn=3,ze=1e-6;function rn(t){return"translate("+t+",0)"}function an(t){return e=>+t(e)}function on(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),i=>+t(i)+e}function sn(){return!this.__axis}function un(t,e){var i=[],n=null,r=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=1,c="y",h=rn;function f(p){var E=n??(e.ticks?e.ticks.apply(e,i):e.domain()),R=r??(e.tickFormat?e.tickFormat.apply(e,i):en),S=Math.max(a,0)+s,k=e.range(),T=+k[0]+l,z=+k[k.length-1]+l,C=(e.bandwidth?on:an)(e.copy(),l),$=p.selection?p.selection():p,M=$.selectAll(".domain").data([null]),F=$.selectAll(".tick").data(E,e).order(),X=F.exit(),I=F.enter().append("g").attr("class","tick"),Y=F.select("line"),V=F.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(I),Y=Y.merge(I.append("line").attr("stroke","currentColor").attr(c+"2",u*a)),V=V.merge(I.append("text").attr("fill","currentColor").attr(c,u*S).attr("dy","0.71em")),p!==$&&(M=M.transition(p),F=F.transition(p),Y=Y.transition(p),V=V.transition(p),X=X.transition(p).attr("opacity",ze).attr("transform",function(x){return isFinite(x=C(x))?h(x+l):this.getAttribute("transform")}),I.attr("opacity",ze).attr("transform",function(x){var U=this.parentNode.__axis;return h((U&&isFinite(U=U(x))?U:C(x))+l)})),X.remove(),M.attr("d",o?"M"+T+","+u*o+"V"+l+"H"+z+"V"+u*o:"M"+T+","+l+"H"+z),F.attr("opacity",1).attr("transform",function(x){return h(C(x)+l)}),Y.attr(c+"2",u*a),V.attr(c,u*S).text(R),$.filter(sn).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),$.each(function(){this.__axis=C})}return f.scale=function(p){return arguments.length?(e=p,f):e},f.ticks=function(){return i=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(i=p==null?[]:Array.from(p),f):i.slice()},f.tickValues=function(p){return arguments.length?(n=p==null?null:Array.from(p),f):n&&n.slice()},f.tickFormat=function(p){return arguments.length?(r=p,f):r},f.tickSize=function(p){return arguments.length?(a=o=+p,f):a},f.tickSizeInner=function(p){return arguments.length?(a=+p,f):a},f.tickSizeOuter=function(p){return arguments.length?(o=+p,f):o},f.tickPadding=function(p){return arguments.length?(s=+p,f):s},f.offset=function(p){return arguments.length?(l=+p,f):l},f}function ln(t){return un(nn,t)}var cn={value:()=>{}};function ke(){for(var t=0,e=arguments.length,i={},n;t<e;++t){if(!(n=arguments[t]+"")||n in i||/[\s.]/.test(n))throw new Error("illegal type: "+n);i[n]=[]}return new Ft(i)}function Ft(t){this._=t}function hn(t,e){return t.trim().split(/^|\s+/).map(function(i){var n="",r=i.indexOf(".");if(r>=0&&(n=i.slice(r+1),i=i.slice(0,r)),i&&!e.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:n}})}Ft.prototype=ke.prototype={constructor:Ft,on:function(t,e){var i=this._,n=hn(t+"",i),r,a=-1,o=n.length;if(arguments.length<2){for(;++a<o;)if((r=(t=n[a]).type)&&(r=fn(i[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(r=(t=n[a]).type)i[r]=Ne(i[r],t.name,e);else if(e==null)for(r in i)i[r]=Ne(i[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new Ft(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var i=new Array(r),n=0,r,a;n<r;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,r=a.length;n<r;++n)a[n].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],r=0,a=n.length;r<a;++r)n[r].value.apply(e,i)}};function fn(t,e){for(var i=0,n=t.length,r;i<n;++i)if((r=t[i]).name===e)return r.value}function Ne(t,e,i){for(var n=0,r=t.length;n<r;++n)if(t[n].name===e){t[n]=cn,t=t.slice(0,n).concat(t.slice(n+1));break}return i!=null&&t.push({name:e,value:i}),t}var oe="http://www.w3.org/1999/xhtml";const $e={svg:"http://www.w3.org/2000/svg",xhtml:oe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Kt(t){var e=t+="",i=e.indexOf(":");return i>=0&&(e=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),$e.hasOwnProperty(e)?{space:$e[e],local:t}:t}function dn(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===oe&&e.documentElement.namespaceURI===oe?e.createElement(t):e.createElementNS(i,t)}}function pn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function li(t){var e=Kt(t);return(e.local?pn:dn)(e)}function wn(){}function ye(t){return t==null?wn:function(){return this.querySelector(t)}}function gn(t){typeof t!="function"&&(t=ye(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var a=e[r],o=a.length,s=n[r]=new Array(o),l,u,c=0;c<o;++c)(l=a[c])&&(u=t.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new B(n,this._parents)}function mn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function kn(){return[]}function ci(t){return t==null?kn:function(){return this.querySelectorAll(t)}}function yn(t){return function(){return mn(t.apply(this,arguments))}}function vn(t){typeof t=="function"?t=yn(t):t=ci(t);for(var e=this._groups,i=e.length,n=[],r=[],a=0;a<i;++a)for(var o=e[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(n.push(t.call(l,l.__data__,u,o)),r.push(l));return new B(n,r)}function hi(t){return function(){return this.matches(t)}}function fi(t){return function(e){return e.matches(t)}}var xn=Array.prototype.find;function _n(t){return function(){return xn.call(this.children,t)}}function bn(){return this.firstElementChild}function Rn(t){return this.select(t==null?bn:_n(typeof t=="function"?t:fi(t)))}var En=Array.prototype.filter;function Mn(){return Array.from(this.children)}function An(t){return function(){return En.call(this.children,t)}}function Sn(t){return this.selectAll(t==null?Mn:An(typeof t=="function"?t:fi(t)))}function Cn(t){typeof t!="function"&&(t=hi(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var a=e[r],o=a.length,s=n[r]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new B(n,this._parents)}function di(t){return new Array(t.length)}function Tn(){return new B(this._enter||this._groups.map(di),this._parents)}function Bt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Bt.prototype={constructor:Bt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function zn(t){return function(){return t}}function Nn(t,e,i,n,r,a){for(var o=0,s,l=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],n[o]=s):i[o]=new Bt(t,a[o]);for(;o<l;++o)(s=e[o])&&(r[o]=s)}function $n(t,e,i,n,r,a,o){var s,l,u=new Map,c=e.length,h=a.length,f=new Array(c),p;for(s=0;s<c;++s)(l=e[s])&&(f[s]=p=o.call(l,l.__data__,s,e)+"",u.has(p)?r[s]=l:u.set(p,l));for(s=0;s<h;++s)p=o.call(t,a[s],s,a)+"",(l=u.get(p))?(n[s]=l,l.__data__=a[s],u.delete(p)):i[s]=new Bt(t,a[s]);for(s=0;s<c;++s)(l=e[s])&&u.get(f[s])===l&&(r[s]=l)}function Fn(t){return t.__data__}function Pn(t,e){if(!arguments.length)return Array.from(this,Fn);var i=e?$n:Nn,n=this._parents,r=this._groups;typeof t!="function"&&(t=zn(t));for(var a=r.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=n[u],h=r[u],f=h.length,p=Un(t.call(c,c&&c.__data__,u,n)),E=p.length,R=s[u]=new Array(E),S=o[u]=new Array(E),k=l[u]=new Array(f);i(c,h,R,S,k,p,e);for(var T=0,z=0,C,$;T<E;++T)if(C=R[T]){for(T>=z&&(z=T+1);!($=S[z])&&++z<E;);C._next=$||null}}return o=new B(o,n),o._enter=s,o._exit=l,o}function Un(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ln(){return new B(this._exit||this._groups.map(di),this._parents)}function Hn(t,e,i){var n=this.enter(),r=this,a=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),i==null?a.remove():i(a),n&&r?n.merge(r).order():r}function Bn(t){for(var e=t.selection?t.selection():t,i=this._groups,n=e._groups,r=i.length,a=n.length,o=Math.min(r,a),s=new Array(r),l=0;l<o;++l)for(var u=i[l],c=n[l],h=u.length,f=s[l]=new Array(h),p,E=0;E<h;++E)(p=u[E]||c[E])&&(f[E]=p);for(;l<r;++l)s[l]=i[l];return new B(s,this._parents)}function In(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n=t[e],r=n.length-1,a=n[r],o;--r>=0;)(o=n[r])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Yn(t){t||(t=Dn);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var i=this._groups,n=i.length,r=new Array(n),a=0;a<n;++a){for(var o=i[a],s=o.length,l=r[a]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(l[c]=u);l.sort(e)}return new B(r,this._parents).order()}function Dn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function On(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function qn(){return Array.from(this)}function Wn(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,a=n.length;r<a;++r){var o=n[r];if(o)return o}return null}function Gn(){let t=0;for(const e of this)++t;return t}function Xn(){return!this.node()}function Vn(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var r=e[i],a=0,o=r.length,s;a<o;++a)(s=r[a])&&t.call(s,s.__data__,a,r);return this}function Kn(t){return function(){this.removeAttribute(t)}}function Jn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zn(t,e){return function(){this.setAttribute(t,e)}}function Qn(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function jn(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function tr(t,e){return function(){var i=e.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function er(t,e){var i=Kt(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((e==null?i.local?Jn:Kn:typeof e=="function"?i.local?tr:jn:i.local?Qn:Zn)(i,e))}function pi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ir(t){return function(){this.style.removeProperty(t)}}function nr(t,e,i){return function(){this.style.setProperty(t,e,i)}}function rr(t,e,i){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,i)}}function ar(t,e,i){return arguments.length>1?this.each((e==null?ir:typeof e=="function"?rr:nr)(t,e,i??"")):wt(this.node(),t)}function wt(t,e){return t.style.getPropertyValue(e)||pi(t).getComputedStyle(t,null).getPropertyValue(e)}function or(t){return function(){delete this[t]}}function sr(t,e){return function(){this[t]=e}}function ur(t,e){return function(){var i=e.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function lr(t,e){return arguments.length>1?this.each((e==null?or:typeof e=="function"?ur:sr)(t,e)):this.node()[t]}function wi(t){return t.trim().split(/^|\s+/)}function ve(t){return t.classList||new gi(t)}function gi(t){this._node=t,this._names=wi(t.getAttribute("class")||"")}gi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function mi(t,e){for(var i=ve(t),n=-1,r=e.length;++n<r;)i.add(e[n])}function ki(t,e){for(var i=ve(t),n=-1,r=e.length;++n<r;)i.remove(e[n])}function cr(t){return function(){mi(this,t)}}function hr(t){return function(){ki(this,t)}}function fr(t,e){return function(){(e.apply(this,arguments)?mi:ki)(this,t)}}function dr(t,e){var i=wi(t+"");if(arguments.length<2){for(var n=ve(this.node()),r=-1,a=i.length;++r<a;)if(!n.contains(i[r]))return!1;return!0}return this.each((typeof e=="function"?fr:e?cr:hr)(i,e))}function pr(){this.textContent=""}function wr(t){return function(){this.textContent=t}}function gr(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function mr(t){return arguments.length?this.each(t==null?pr:(typeof t=="function"?gr:wr)(t)):this.node().textContent}function kr(){this.innerHTML=""}function yr(t){return function(){this.innerHTML=t}}function vr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function xr(t){return arguments.length?this.each(t==null?kr:(typeof t=="function"?vr:yr)(t)):this.node().innerHTML}function _r(){this.nextSibling&&this.parentNode.appendChild(this)}function br(){return this.each(_r)}function Rr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Er(){return this.each(Rr)}function Mr(t){var e=typeof t=="function"?t:li(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ar(){return null}function Sr(t,e){var i=typeof t=="function"?t:li(t),n=e==null?Ar:typeof e=="function"?e:ye(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})}function Cr(){var t=this.parentNode;t&&t.removeChild(this)}function Tr(){return this.each(Cr)}function zr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Nr(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $r(t){return this.select(t?Nr:zr)}function Fr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Pr(t){return function(e){t.call(this,e,this.__data__)}}function Ur(t){return t.trim().split(/^|\s+/).map(function(e){var i="",n=e.indexOf(".");return n>=0&&(i=e.slice(n+1),e=e.slice(0,n)),{type:e,name:i}})}function Lr(t){return function(){var e=this.__on;if(e){for(var i=0,n=-1,r=e.length,a;i<r;++i)a=e[i],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++n]=a;++n?e.length=n:delete this.__on}}}function Hr(t,e,i){return function(){var n=this.__on,r,a=Pr(e);if(n){for(var o=0,s=n.length;o<s;++o)if((r=n[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=i),r.value=e;return}}this.addEventListener(t.type,a,i),r={type:t.type,name:t.name,value:e,listener:a,options:i},n?n.push(r):this.__on=[r]}}function Br(t,e,i){var n=Ur(t+""),r,a=n.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(r=0,c=s[l];r<a;++r)if((o=n[r]).type===c.type&&o.name===c.name)return c.value}return}for(s=e?Hr:Lr,r=0;r<a;++r)this.each(s(n[r],e,i));return this}function yi(t,e,i){var n=pi(t),r=n.CustomEvent;typeof r=="function"?r=new r(e,i):(r=n.document.createEvent("Event"),i?(r.initEvent(e,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Ir(t,e){return function(){return yi(this,t,e)}}function Yr(t,e){return function(){return yi(this,t,e.apply(this,arguments))}}function Dr(t,e){return this.each((typeof e=="function"?Yr:Ir)(t,e))}function*Or(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],r=0,a=n.length,o;r<a;++r)(o=n[r])&&(yield o)}var vi=[null];function B(t,e){this._groups=t,this._parents=e}function Mt(){return new B([[document.documentElement]],vi)}function qr(){return this}B.prototype=Mt.prototype={constructor:B,select:gn,selectAll:vn,selectChild:Rn,selectChildren:Sn,filter:Cn,data:Pn,enter:Tn,exit:Ln,join:Hn,merge:Bn,selection:qr,order:In,sort:Yn,call:On,nodes:qn,node:Wn,size:Gn,empty:Xn,each:Vn,attr:er,style:ar,property:lr,classed:dr,text:mr,html:xr,raise:br,lower:Er,append:Mr,insert:Sr,remove:Tr,clone:$r,datum:Fr,on:Br,dispatch:Dr,[Symbol.iterator]:Or};function at(t){return typeof t=="string"?new B([[document.querySelector(t)]],[document.documentElement]):new B([[t]],vi)}function Wr(t){let e;for(;e=t.sourceEvent;)t=e;return t}function st(t,e){if(t=Wr(t),e===void 0&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const se={capture:!0,passive:!1};function ue(t){t.preventDefault(),t.stopImmediatePropagation()}function Gr(t){var e=t.document.documentElement,i=at(t).on("dragstart.drag",ue,se);"onselectstart"in e?i.on("selectstart.drag",ue,se):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Xr(t,e){var i=t.document.documentElement,n=at(t).on("dragstart.drag",null);e&&(n.on("click.drag",ue,se),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in i?n.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}function xe(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function xi(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function At(){}var bt=.7,It=1/bt,pt="\\s*([+-]?\\d+)\\s*",Rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Q="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vr=/^#([0-9a-f]{3,8})$/,Kr=new RegExp(`^rgb\\(${pt},${pt},${pt}\\)$`),Jr=new RegExp(`^rgb\\(${Q},${Q},${Q}\\)$`),Zr=new RegExp(`^rgba\\(${pt},${pt},${pt},${Rt}\\)$`),Qr=new RegExp(`^rgba\\(${Q},${Q},${Q},${Rt}\\)$`),jr=new RegExp(`^hsl\\(${Rt},${Q},${Q}\\)$`),ta=new RegExp(`^hsla\\(${Rt},${Q},${Q},${Rt}\\)$`),Fe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xe(At,ht,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Pe,formatHex:Pe,formatHex8:ea,formatHsl:ia,formatRgb:Ue,toString:Ue});function Pe(){return this.rgb().formatHex()}function ea(){return this.rgb().formatHex8()}function ia(){return _i(this).formatHsl()}function Ue(){return this.rgb().formatRgb()}function ht(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=Vr.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Le(e):i===3?new L(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?St(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?St(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Kr.exec(t))?new L(e[1],e[2],e[3],1):(e=Jr.exec(t))?new L(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Zr.exec(t))?St(e[1],e[2],e[3],e[4]):(e=Qr.exec(t))?St(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=jr.exec(t))?Ie(e[1],e[2]/100,e[3]/100,1):(e=ta.exec(t))?Ie(e[1],e[2]/100,e[3]/100,e[4]):Fe.hasOwnProperty(t)?Le(Fe[t]):t==="transparent"?new L(NaN,NaN,NaN,0):null}function Le(t){return new L(t>>16&255,t>>8&255,t&255,1)}function St(t,e,i,n){return n<=0&&(t=e=i=NaN),new L(t,e,i,n)}function na(t){return t instanceof At||(t=ht(t)),t?(t=t.rgb(),new L(t.r,t.g,t.b,t.opacity)):new L}function le(t,e,i,n){return arguments.length===1?na(t):new L(t,e,i,n??1)}function L(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}xe(L,le,xi(At,{brighter(t){return t=t==null?It:Math.pow(It,t),new L(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bt:Math.pow(bt,t),new L(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new L(lt(this.r),lt(this.g),lt(this.b),Yt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:He,formatHex:He,formatHex8:ra,formatRgb:Be,toString:Be}));function He(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}`}function ra(){return`#${ut(this.r)}${ut(this.g)}${ut(this.b)}${ut((isNaN(this.opacity)?1:this.opacity)*255)}`}function Be(){const t=Yt(this.opacity);return`${t===1?"rgb(":"rgba("}${lt(this.r)}, ${lt(this.g)}, ${lt(this.b)}${t===1?")":`, ${t})`}`}function Yt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ut(t){return t=lt(t),(t<16?"0":"")+t.toString(16)}function Ie(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new W(t,e,i,n)}function _i(t){if(t instanceof W)return new W(t.h,t.s,t.l,t.opacity);if(t instanceof At||(t=ht(t)),!t)return new W;if(t instanceof W)return t;t=t.rgb();var e=t.r/255,i=t.g/255,n=t.b/255,r=Math.min(e,i,n),a=Math.max(e,i,n),o=NaN,s=a-r,l=(a+r)/2;return s?(e===a?o=(i-n)/s+(i<n)*6:i===a?o=(n-e)/s+2:o=(e-i)/s+4,s/=l<.5?a+r:2-a-r,o*=60):s=l>0&&l<1?0:o,new W(o,s,l,t.opacity)}function aa(t,e,i,n){return arguments.length===1?_i(t):new W(t,e,i,n??1)}function W(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}xe(W,aa,xi(At,{brighter(t){return t=t==null?It:Math.pow(It,t),new W(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bt:Math.pow(bt,t),new W(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,r=2*i-n;return new L(jt(t>=240?t-240:t+120,r,n),jt(t,r,n),jt(t<120?t+240:t-120,r,n),this.opacity)},clamp(){return new W(Ye(this.h),Ct(this.s),Ct(this.l),Yt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Yt(this.opacity);return`${t===1?"hsl(":"hsla("}${Ye(this.h)}, ${Ct(this.s)*100}%, ${Ct(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ye(t){return t=(t||0)%360,t<0?t+360:t}function Ct(t){return Math.max(0,Math.min(1,t||0))}function jt(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}const _e=t=>()=>t;function oa(t,e){return function(i){return t+i*e}}function sa(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}function ua(t){return(t=+t)==1?bi:function(e,i){return i-e?sa(e,i,t):_e(isNaN(e)?i:e)}}function bi(t,e){var i=e-t;return i?oa(t,i):_e(isNaN(t)?e:t)}const Dt=(function t(e){var i=ua(e);function n(r,a){var o=i((r=le(r)).r,(a=le(a)).r),s=i(r.g,a.g),l=i(r.b,a.b),u=bi(r.opacity,a.opacity);return function(c){return r.r=o(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return n.gamma=t,n})(1);function la(t,e){e||(e=[]);var i=t?Math.min(e.length,t.length):0,n=e.slice(),r;return function(a){for(r=0;r<i;++r)n[r]=t[r]*(1-a)+e[r]*a;return n}}function ca(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ha(t,e){var i=e?e.length:0,n=t?Math.min(i,t.length):0,r=new Array(n),a=new Array(i),o;for(o=0;o<n;++o)r[o]=be(t[o],e[o]);for(;o<i;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=r[o](s);return a}}function fa(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}}function q(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function da(t,e){var i={},n={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?i[r]=be(t[r],e[r]):n[r]=e[r];return function(a){for(r in i)n[r]=i[r](a);return n}}var ce=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,te=new RegExp(ce.source,"g");function pa(t){return function(){return t}}function wa(t){return function(e){return t(e)+""}}function Ri(t,e){var i=ce.lastIndex=te.lastIndex=0,n,r,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(n=ce.exec(t))&&(r=te.exec(e));)(a=r.index)>i&&(a=e.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:q(n,r)})),i=te.lastIndex;return i<e.length&&(a=e.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?wa(l[0].x):pa(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)s[(h=l[c]).i]=h.x(u);return s.join("")})}function be(t,e){var i=typeof e,n;return e==null||i==="boolean"?_e(e):(i==="number"?q:i==="string"?(n=ht(e))?(e=n,Dt):Ri:e instanceof ht?Dt:e instanceof Date?fa:ca(e)?la:Array.isArray(e)?ha:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?da:q)(t,e)}function ga(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var De=180/Math.PI,he={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ei(t,e,i,n,r,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*i+e*n)&&(i-=t*l,n-=e*l),(s=Math.sqrt(i*i+n*n))&&(i/=s,n/=s,l/=s),t*n<e*i&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*De,skewX:Math.atan(l)*De,scaleX:o,scaleY:s}}var Tt;function ma(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?he:Ei(e.a,e.b,e.c,e.d,e.e,e.f)}function ka(t){return t==null||(Tt||(Tt=document.createElementNS("http://www.w3.org/2000/svg","g")),Tt.setAttribute("transform",t),!(t=Tt.transform.baseVal.consolidate()))?he:(t=t.matrix,Ei(t.a,t.b,t.c,t.d,t.e,t.f))}function Mi(t,e,i,n){function r(u){return u.length?u.pop()+" ":""}function a(u,c,h,f,p,E){if(u!==h||c!==f){var R=p.push("translate(",null,e,null,i);E.push({i:R-4,x:q(u,h)},{i:R-2,x:q(c,f)})}else(h||f)&&p.push("translate("+h+e+f+i)}function o(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(r(h)+"rotate(",null,n)-2,x:q(u,c)})):c&&h.push(r(h)+"rotate("+c+n)}function s(u,c,h,f){u!==c?f.push({i:h.push(r(h)+"skewX(",null,n)-2,x:q(u,c)}):c&&h.push(r(h)+"skewX("+c+n)}function l(u,c,h,f,p,E){if(u!==h||c!==f){var R=p.push(r(p)+"scale(",null,",",null,")");E.push({i:R-4,x:q(u,h)},{i:R-2,x:q(c,f)})}else(h!==1||f!==1)&&p.push(r(p)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=t(u),c=t(c),a(u.translateX,u.translateY,c.translateX,c.translateY,h,f),o(u.rotate,c.rotate,h,f),s(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(p){for(var E=-1,R=f.length,S;++E<R;)h[(S=f[E]).i]=S.x(p);return h.join("")}}}var ya=Mi(ma,"px, ","px)","deg)"),va=Mi(ka,", ",")",")"),xa=1e-12;function Oe(t){return((t=Math.exp(t))+1/t)/2}function _a(t){return((t=Math.exp(t))-1/t)/2}function ba(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ra=(function t(e,i,n){function r(a,o){var s=a[0],l=a[1],u=a[2],c=o[0],h=o[1],f=o[2],p=c-s,E=h-l,R=p*p+E*E,S,k;if(R<xa)k=Math.log(f/u)/e,S=function(F){return[s+F*p,l+F*E,u*Math.exp(e*F*k)]};else{var T=Math.sqrt(R),z=(f*f-u*u+n*R)/(2*u*i*T),C=(f*f-u*u-n*R)/(2*f*i*T),$=Math.log(Math.sqrt(z*z+1)-z),M=Math.log(Math.sqrt(C*C+1)-C);k=(M-$)/e,S=function(F){var X=F*k,I=Oe($),Y=u/(i*T)*(I*ba(e*X+$)-_a($));return[s+Y*p,l+Y*E,u*I/Oe(e*X+$)]}}return S.duration=k*1e3*e/Math.SQRT2,S}return r.rho=function(a){var o=Math.max(.001,+a),s=o*o,l=s*s;return t(o,s,l)},r})(Math.SQRT2,2,4);var gt=0,xt=0,yt=0,Ai=1e3,Ot,_t,qt=0,ft=0,Jt=0,Et=typeof performance=="object"&&performance.now?performance:Date,Si=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Re(){return ft||(Si(Ea),ft=Et.now()+Jt)}function Ea(){ft=0}function Wt(){this._call=this._time=this._next=null}Wt.prototype=Ci.prototype={constructor:Wt,restart:function(t,e,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?Re():+i)+(e==null?0:+e),!this._next&&_t!==this&&(_t?_t._next=this:Ot=this,_t=this),this._call=t,this._time=i,fe()},stop:function(){this._call&&(this._call=null,this._time=1/0,fe())}};function Ci(t,e,i){var n=new Wt;return n.restart(t,e,i),n}function Ma(){Re(),++gt;for(var t=Ot,e;t;)(e=ft-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gt}function qe(){ft=(qt=Et.now())+Jt,gt=xt=0;try{Ma()}finally{gt=0,Sa(),ft=0}}function Aa(){var t=Et.now(),e=t-qt;e>Ai&&(Jt-=e,qt=t)}function Sa(){for(var t,e=Ot,i,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(i=e._next,e._next=null,e=t?t._next=i:Ot=i);_t=t,fe(n)}function fe(t){if(!gt){xt&&(xt=clearTimeout(xt));var e=t-ft;e>24?(t<1/0&&(xt=setTimeout(qe,t-Et.now()-Jt)),yt&&(yt=clearInterval(yt))):(yt||(qt=Et.now(),yt=setInterval(Aa,Ai)),gt=1,Si(qe))}}function We(t,e,i){var n=new Wt;return e=e==null?0:+e,n.restart(r=>{n.stop(),t(r+e)},e,i),n}var Ca=ke("start","end","cancel","interrupt"),Ta=[],Ti=0,Ge=1,de=2,Pt=3,Xe=4,pe=5,Ut=6;function Zt(t,e,i,n,r,a){var o=t.__transition;if(!o)t.__transition={};else if(i in o)return;za(t,i,{name:e,index:n,group:r,on:Ca,tween:Ta,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ti})}function Ee(t,e){var i=G(t,e);if(i.state>Ti)throw new Error("too late; already scheduled");return i}function j(t,e){var i=G(t,e);if(i.state>Pt)throw new Error("too late; already running");return i}function G(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function za(t,e,i){var n=t.__transition,r;n[e]=i,i.timer=Ci(a,0,i.time);function a(u){i.state=Ge,i.timer.restart(o,i.delay,i.time),i.delay<=u&&o(u-i.delay)}function o(u){var c,h,f,p;if(i.state!==Ge)return l();for(c in n)if(p=n[c],p.name===i.name){if(p.state===Pt)return We(o);p.state===Xe?(p.state=Ut,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete n[c]):+c<e&&(p.state=Ut,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete n[c])}if(We(function(){i.state===Pt&&(i.state=Xe,i.timer.restart(s,i.delay,i.time),s(u))}),i.state=de,i.on.call("start",t,t.__data__,i.index,i.group),i.state===de){for(i.state=Pt,r=new Array(f=i.tween.length),c=0,h=-1;c<f;++c)(p=i.tween[c].value.call(t,t.__data__,i.index,i.group))&&(r[++h]=p);r.length=h+1}}function s(u){for(var c=u<i.duration?i.ease.call(null,u/i.duration):(i.timer.restart(l),i.state=pe,1),h=-1,f=r.length;++h<f;)r[h].call(t,c);i.state===pe&&(i.on.call("end",t,t.__data__,i.index,i.group),l())}function l(){i.state=Ut,i.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function Lt(t,e){var i=t.__transition,n,r,a=!0,o;if(i){e=e==null?null:e+"";for(o in i){if((n=i[o]).name!==e){a=!1;continue}r=n.state>de&&n.state<pe,n.state=Ut,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[o]}a&&delete t.__transition}}function Na(t){return this.each(function(){Lt(this,t)})}function $a(t,e){var i,n;return function(){var r=j(this,t),a=r.tween;if(a!==i){n=i=a;for(var o=0,s=n.length;o<s;++o)if(n[o].name===e){n=n.slice(),n.splice(o,1);break}}r.tween=n}}function Fa(t,e,i){var n,r;if(typeof i!="function")throw new Error;return function(){var a=j(this,t),o=a.tween;if(o!==n){r=(n=o).slice();for(var s={name:e,value:i},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=s;break}l===u&&r.push(s)}a.tween=r}}function Pa(t,e){var i=this._id;if(t+="",arguments.length<2){for(var n=G(this.node(),i).tween,r=0,a=n.length,o;r<a;++r)if((o=n[r]).name===t)return o.value;return null}return this.each((e==null?$a:Fa)(i,t,e))}function Me(t,e,i){var n=t._id;return t.each(function(){var r=j(this,n);(r.value||(r.value={}))[e]=i.apply(this,arguments)}),function(r){return G(r,n).value[e]}}function zi(t,e){var i;return(typeof e=="number"?q:e instanceof ht?Dt:(i=ht(e))?(e=i,Dt):Ri)(t,e)}function Ua(t){return function(){this.removeAttribute(t)}}function La(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ha(t,e,i){var n,r=i+"",a;return function(){var o=this.getAttribute(t);return o===r?null:o===n?a:a=e(n=o,i)}}function Ba(t,e,i){var n,r=i+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===n?a:a=e(n=o,i)}}function Ia(t,e,i){var n,r,a;return function(){var o,s=i(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===n&&l===r?a:(r=l,a=e(n=o,s)))}}function Ya(t,e,i){var n,r,a;return function(){var o,s=i(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===n&&l===r?a:(r=l,a=e(n=o,s)))}}function Da(t,e){var i=Kt(t),n=i==="transform"?va:zi;return this.attrTween(t,typeof e=="function"?(i.local?Ya:Ia)(i,n,Me(this,"attr."+t,e)):e==null?(i.local?La:Ua)(i):(i.local?Ba:Ha)(i,n,e))}function Oa(t,e){return function(i){this.setAttribute(t,e.call(this,i))}}function qa(t,e){return function(i){this.setAttributeNS(t.space,t.local,e.call(this,i))}}function Wa(t,e){var i,n;function r(){var a=e.apply(this,arguments);return a!==n&&(i=(n=a)&&qa(t,a)),i}return r._value=e,r}function Ga(t,e){var i,n;function r(){var a=e.apply(this,arguments);return a!==n&&(i=(n=a)&&Oa(t,a)),i}return r._value=e,r}function Xa(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;var n=Kt(t);return this.tween(i,(n.local?Wa:Ga)(n,e))}function Va(t,e){return function(){Ee(this,t).delay=+e.apply(this,arguments)}}function Ka(t,e){return e=+e,function(){Ee(this,t).delay=e}}function Ja(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Va:Ka)(e,t)):G(this.node(),e).delay}function Za(t,e){return function(){j(this,t).duration=+e.apply(this,arguments)}}function Qa(t,e){return e=+e,function(){j(this,t).duration=e}}function ja(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Za:Qa)(e,t)):G(this.node(),e).duration}function to(t,e){if(typeof e!="function")throw new Error;return function(){j(this,t).ease=e}}function eo(t){var e=this._id;return arguments.length?this.each(to(e,t)):G(this.node(),e).ease}function io(t,e){return function(){var i=e.apply(this,arguments);if(typeof i!="function")throw new Error;j(this,t).ease=i}}function no(t){if(typeof t!="function")throw new Error;return this.each(io(this._id,t))}function ro(t){typeof t!="function"&&(t=hi(t));for(var e=this._groups,i=e.length,n=new Array(i),r=0;r<i;++r)for(var a=e[r],o=a.length,s=n[r]=[],l,u=0;u<o;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&s.push(l);return new rt(n,this._parents,this._name,this._id)}function ao(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,n=e.length,r=i.length,a=Math.min(n,r),o=new Array(n),s=0;s<a;++s)for(var l=e[s],u=i[s],c=l.length,h=o[s]=new Array(c),f,p=0;p<c;++p)(f=l[p]||u[p])&&(h[p]=f);for(;s<n;++s)o[s]=e[s];return new rt(o,this._parents,this._name,this._id)}function oo(t){return(t+"").trim().split(/^|\s+/).every(function(e){var i=e.indexOf(".");return i>=0&&(e=e.slice(0,i)),!e||e==="start"})}function so(t,e,i){var n,r,a=oo(e)?Ee:j;return function(){var o=a(this,t),s=o.on;s!==n&&(r=(n=s).copy()).on(e,i),o.on=r}}function uo(t,e){var i=this._id;return arguments.length<2?G(this.node(),i).on.on(t):this.each(so(i,t,e))}function lo(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}}function co(){return this.on("end.remove",lo(this._id))}function ho(t){var e=this._name,i=this._id;typeof t!="function"&&(t=ye(t));for(var n=this._groups,r=n.length,a=new Array(r),o=0;o<r;++o)for(var s=n[o],l=s.length,u=a[o]=new Array(l),c,h,f=0;f<l;++f)(c=s[f])&&(h=t.call(c,c.__data__,f,s))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,Zt(u[f],e,i,f,u,G(c,i)));return new rt(a,this._parents,e,i)}function fo(t){var e=this._name,i=this._id;typeof t!="function"&&(t=ci(t));for(var n=this._groups,r=n.length,a=[],o=[],s=0;s<r;++s)for(var l=n[s],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=t.call(c,c.__data__,h,l),p,E=G(c,i),R=0,S=f.length;R<S;++R)(p=f[R])&&Zt(p,e,i,R,f,E);a.push(f),o.push(c)}return new rt(a,o,e,i)}var po=Mt.prototype.constructor;function wo(){return new po(this._groups,this._parents)}function go(t,e){var i,n,r;return function(){var a=wt(this,t),o=(this.style.removeProperty(t),wt(this,t));return a===o?null:a===i&&o===n?r:r=e(i=a,n=o)}}function Ni(t){return function(){this.style.removeProperty(t)}}function mo(t,e,i){var n,r=i+"",a;return function(){var o=wt(this,t);return o===r?null:o===n?a:a=e(n=o,i)}}function ko(t,e,i){var n,r,a;return function(){var o=wt(this,t),s=i(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),wt(this,t))),o===l?null:o===n&&l===r?a:(r=l,a=e(n=o,s))}}function yo(t,e){var i,n,r,a="style."+e,o="end."+a,s;return function(){var l=j(this,t),u=l.on,c=l.value[a]==null?s||(s=Ni(e)):void 0;(u!==i||r!==c)&&(n=(i=u).copy()).on(o,r=c),l.on=n}}function vo(t,e,i){var n=(t+="")=="transform"?ya:zi;return e==null?this.styleTween(t,go(t,n)).on("end.style."+t,Ni(t)):typeof e=="function"?this.styleTween(t,ko(t,n,Me(this,"style."+t,e))).each(yo(this._id,t)):this.styleTween(t,mo(t,n,e),i).on("end.style."+t,null)}function xo(t,e,i){return function(n){this.style.setProperty(t,e.call(this,n),i)}}function _o(t,e,i){var n,r;function a(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&xo(t,o,i)),n}return a._value=e,a}function bo(t,e,i){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,_o(t,e,i??""))}function Ro(t){return function(){this.textContent=t}}function Eo(t){return function(){var e=t(this);this.textContent=e??""}}function Mo(t){return this.tween("text",typeof t=="function"?Eo(Me(this,"text",t)):Ro(t==null?"":t+""))}function Ao(t){return function(e){this.textContent=t.call(this,e)}}function So(t){var e,i;function n(){var r=t.apply(this,arguments);return r!==i&&(e=(i=r)&&Ao(r)),e}return n._value=t,n}function Co(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,So(t))}function To(){for(var t=this._name,e=this._id,i=$i(),n=this._groups,r=n.length,a=0;a<r;++a)for(var o=n[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var c=G(l,e);Zt(l,t,i,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new rt(n,this._parents,t,i)}function zo(){var t,e,i=this,n=i._id,r=i.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--r===0&&a()}};i.each(function(){var u=j(this,n),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e}),r===0&&a()})}var No=0;function rt(t,e,i,n){this._groups=t,this._parents=e,this._name=i,this._id=n}function $i(){return++No}var it=Mt.prototype;rt.prototype={constructor:rt,select:ho,selectAll:fo,selectChild:it.selectChild,selectChildren:it.selectChildren,filter:ro,merge:ao,selection:wo,transition:To,call:it.call,nodes:it.nodes,node:it.node,size:it.size,empty:it.empty,each:it.each,on:uo,attr:Da,attrTween:Xa,style:vo,styleTween:bo,text:Mo,textTween:Co,remove:co,tween:Pa,delay:Ja,duration:ja,ease:eo,easeVarying:no,end:zo,[Symbol.iterator]:it[Symbol.iterator]};function $o(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Fo={time:null,delay:0,duration:250,ease:$o};function Po(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return i}function Uo(t){var e,i;t instanceof rt?(e=t._id,t=t._name):(e=$i(),(i=Fo).time=Re(),t=t==null?null:t+"");for(var n=this._groups,r=n.length,a=0;a<r;++a)for(var o=n[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&Zt(l,t,e,u,o,i||Po(l,e));return new rt(n,this._parents,t,e)}Mt.prototype.interrupt=Na;Mt.prototype.transition=Uo;function Lo(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Gt(t,e){if(!isFinite(t)||t===0)return null;var i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}function mt(t){return t=Gt(Math.abs(t)),t?t[1]:NaN}function Ho(t,e){return function(i,n){for(var r=i.length,a=[],o=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(i.substring(r-=s,r+s)),!((l+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Bo(t){return function(e){return e.replace(/[0-9]/g,function(i){return t[+i]})}}var Io=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xt(t){if(!(e=Io.exec(t)))throw new Error("invalid format: "+t);var e;return new Ae({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xt.prototype=Ae.prototype;function Ae(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ae.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Yo(t){t:for(var e=t.length,i=1,n=-1,r;i<e;++i)switch(t[i]){case".":n=r=i;break;case"0":n===0&&(n=i),r=i;break;default:if(!+t[i])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(r+1):t}var Vt;function Do(t,e){var i=Gt(t,e);if(!i)return Vt=void 0,t.toPrecision(e);var n=i[0],r=i[1],a=r-(Vt=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Gt(t,Math.max(0,e+a-1))[0]}function Ve(t,e){var i=Gt(t,e);if(!i)return t+"";var n=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const Ke={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Lo,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ve(t*100,e),r:Ve,s:Do,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Je(t){return t}var Ze=Array.prototype.map,Qe=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Oo(t){var e=t.grouping===void 0||t.thousands===void 0?Je:Ho(Ze.call(t.grouping,Number),t.thousands+""),i=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Je:Bo(Ze.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h,f){h=Xt(h);var p=h.fill,E=h.align,R=h.sign,S=h.symbol,k=h.zero,T=h.width,z=h.comma,C=h.precision,$=h.trim,M=h.type;M==="n"?(z=!0,M="g"):Ke[M]||(C===void 0&&(C=12),$=!0,M="g"),(k||p==="0"&&E==="=")&&(k=!0,p="0",E="=");var F=(f&&f.prefix!==void 0?f.prefix:"")+(S==="$"?i:S==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():""),X=(S==="$"?n:/[%p]/.test(M)?o:"")+(f&&f.suffix!==void 0?f.suffix:""),I=Ke[M],Y=/[defgprs%]/.test(M);C=C===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function V(x){var U=F,d=X,g,w,m;if(M==="c")d=I(x)+d,x="";else{x=+x;var y=x<0||1/x<0;if(x=isNaN(x)?l:I(Math.abs(x),C),$&&(x=Yo(x)),y&&+x==0&&R!=="+"&&(y=!1),U=(y?R==="("?R:s:R==="-"||R==="("?"":R)+U,d=(M==="s"&&!isNaN(x)&&Vt!==void 0?Qe[8+Vt/3]:"")+d+(y&&R==="("?")":""),Y){for(g=-1,w=x.length;++g<w;)if(m=x.charCodeAt(g),48>m||m>57){d=(m===46?r+x.slice(g+1):x.slice(g))+d,x=x.slice(0,g);break}}}z&&!k&&(x=e(x,1/0));var _=U.length+x.length+d.length,v=_<T?new Array(T-_+1).join(p):"";switch(z&&k&&(x=e(v+x,v.length?T-d.length:1/0),v=""),E){case"<":x=U+x+d+v;break;case"=":x=U+v+x+d;break;case"^":x=v.slice(0,_=v.length>>1)+U+x+d+v.slice(_);break;default:x=v+U+x+d;break}return a(x)}return V.toString=function(){return h+""},V}function c(h,f){var p=Math.max(-8,Math.min(8,Math.floor(mt(f)/3)))*3,E=Math.pow(10,-p),R=u((h=Xt(h),h.type="f",h),{suffix:Qe[8+p/3]});return function(S){return R(E*S)}}return{format:u,formatPrefix:c}}var zt,Fi,Pi;qo({thousands:",",grouping:[3],currency:["$",""]});function qo(t){return zt=Oo(t),Fi=zt.format,Pi=zt.formatPrefix,zt}function Wo(t){return Math.max(0,-mt(Math.abs(t)))}function Go(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mt(e)/3)))*3-mt(Math.abs(t)))}function Xo(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,mt(e)-mt(t))+1}function Ui(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Vo(t){return function(){return t}}function Ko(t){return+t}var je=[0,1];function Z(t){return t}function we(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Vo(isNaN(e)?NaN:.5)}function Jo(t,e){var i;return t>e&&(i=t,t=e,e=i),function(n){return Math.max(t,Math.min(e,n))}}function Zo(t,e,i){var n=t[0],r=t[1],a=e[0],o=e[1];return r<n?(n=we(r,n),a=i(o,a)):(n=we(n,r),a=i(a,o)),function(s){return a(n(s))}}function Qo(t,e,i){var n=Math.min(t.length,e.length)-1,r=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)r[o]=we(t[o],t[o+1]),a[o]=i(e[o],e[o+1]);return function(s){var l=Ki(t,s,1,n)-1;return a[l](r[l](s))}}function Li(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Hi(){var t=je,e=je,i=be,n,r,a,o=Z,s,l,u;function c(){var f=Math.min(t.length,e.length);return o!==Z&&(o=Jo(t[0],t[f-1])),s=f>2?Qo:Zo,l=u=null,h}function h(f){return f==null||isNaN(f=+f)?a:(l||(l=s(t.map(n),e,i)))(n(o(f)))}return h.invert=function(f){return o(r((u||(u=s(e,t.map(n),q)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,Ko),c()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),i=ga,c()},h.clamp=function(f){return arguments.length?(o=f?!0:Z,c()):o!==Z},h.interpolate=function(f){return arguments.length?(i=f,c()):i},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,p){return n=f,r=p,c()}}function jo(){return Hi()(Z,Z)}function ts(t,e,i,n){var r=tn(t,e,i),a;switch(n=Xt(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=Go(r,o))&&(n.precision=a),Pi(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Xo(r,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Wo(r))&&(n.precision=a-(n.type==="%")*2);break}}return Fi(n)}function Bi(t){var e=t.domain;return t.ticks=function(i){var n=e();return ji(n[0],n[n.length-1],i??10)},t.tickFormat=function(i,n){var r=e();return ts(r[0],r[r.length-1],i??10,n)},t.nice=function(i){i==null&&(i=10);var n=e(),r=0,a=n.length-1,o=n[r],s=n[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=r,r=a,a=u);c-- >0;){if(u=ae(o,s,i),u===l)return n[r]=o,n[a]=s,e(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function Se(){var t=jo();return t.copy=function(){return Li(t,Se())},Ui.apply(t,arguments),Bi(t)}function ti(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function es(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function is(t){return t<0?-t*t:t*t}function ns(t){var e=t(Z,Z),i=1;function n(){return i===1?t(Z,Z):i===.5?t(es,is):t(ti(i),ti(1/i))}return e.exponent=function(r){return arguments.length?(i=+r,n()):i},Bi(e)}function Ii(){var t=ns(Hi());return t.copy=function(){return Li(t,Ii()).exponent(t.exponent())},Ui.apply(t,arguments),t}const Nt=t=>()=>t;function rs(t,{sourceEvent:e,target:i,transform:n,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:r}})}function nt(t,e,i){this.k=t,this.x=e,this.y=i}nt.prototype={constructor:nt,scale:function(t){return t===1?this:new nt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new nt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dt=new nt(1,0,0);nt.prototype;function ee(t){t.stopImmediatePropagation()}function vt(t){t.preventDefault(),t.stopImmediatePropagation()}function as(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function os(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ei(){return this.__zoom||dt}function ss(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function us(){return navigator.maxTouchPoints||"ontouchstart"in this}function ls(t,e,i){var n=t.invertX(e[0][0])-i[0][0],r=t.invertX(e[1][0])-i[1][0],a=t.invertY(e[0][1])-i[0][1],o=t.invertY(e[1][1])-i[1][1];return t.translate(r>n?(n+r)/2:Math.min(0,n)||Math.max(0,r),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function cs(){var t=as,e=os,i=ls,n=ss,r=us,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Ra,u=ke("start","zoom","end"),c,h,f,p=500,E=150,R=0,S=10;function k(d){d.property("__zoom",ei).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",Y).filter(r).on("touchstart.zoom",V).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(d,g,w,m){var y=d.selection?d.selection():d;y.property("__zoom",ei),d!==y?$(d,g,w,m):y.interrupt().each(function(){M(this,arguments).event(m).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},k.scaleBy=function(d,g,w,m){k.scaleTo(d,function(){var y=this.__zoom.k,_=typeof g=="function"?g.apply(this,arguments):g;return y*_},w,m)},k.scaleTo=function(d,g,w,m){k.transform(d,function(){var y=e.apply(this,arguments),_=this.__zoom,v=w==null?C(y):typeof w=="function"?w.apply(this,arguments):w,A=_.invert(v),N=typeof g=="function"?g.apply(this,arguments):g;return i(z(T(_,N),v,A),y,o)},w,m)},k.translateBy=function(d,g,w,m){k.transform(d,function(){return i(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof w=="function"?w.apply(this,arguments):w),e.apply(this,arguments),o)},null,m)},k.translateTo=function(d,g,w,m,y){k.transform(d,function(){var _=e.apply(this,arguments),v=this.__zoom,A=m==null?C(_):typeof m=="function"?m.apply(this,arguments):m;return i(dt.translate(A[0],A[1]).scale(v.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof w=="function"?-w.apply(this,arguments):-w),_,o)},m,y)};function T(d,g){return g=Math.max(a[0],Math.min(a[1],g)),g===d.k?d:new nt(g,d.x,d.y)}function z(d,g,w){var m=g[0]-w[0]*d.k,y=g[1]-w[1]*d.k;return m===d.x&&y===d.y?d:new nt(d.k,m,y)}function C(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function $(d,g,w,m){d.on("start.zoom",function(){M(this,arguments).event(m).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(m).end()}).tween("zoom",function(){var y=this,_=arguments,v=M(y,_).event(m),A=e.apply(y,_),N=w==null?C(A):typeof w=="function"?w.apply(y,_):w,K=Math.max(A[1][0]-A[0][0],A[1][1]-A[0][1]),P=y.__zoom,D=typeof g=="function"?g.apply(y,_):g,tt=l(P.invert(N).concat(K/P.k),D.invert(N).concat(K/D.k));return function(O){if(O===1)O=D;else{var et=tt(O),Qt=K/et[2];O=new nt(Qt,N[0]-et[0]*Qt,N[1]-et[1]*Qt)}v.zoom(null,O)}})}function M(d,g,w){return!w&&d.__zooming||new F(d,g)}function F(d,g){this.that=d,this.args=g,this.active=0,this.sourceEvent=null,this.extent=e.apply(d,g),this.taps=0}F.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,g){return this.mouse&&d!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var g=at(this.that).datum();u.call(d,this.that,new rs(d,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:u}),g)}};function X(d,...g){if(!t.apply(this,arguments))return;var w=M(this,g).event(d),m=this.__zoom,y=Math.max(a[0],Math.min(a[1],m.k*Math.pow(2,n.apply(this,arguments)))),_=st(d);if(w.wheel)(w.mouse[0][0]!==_[0]||w.mouse[0][1]!==_[1])&&(w.mouse[1]=m.invert(w.mouse[0]=_)),clearTimeout(w.wheel);else{if(m.k===y)return;w.mouse=[_,m.invert(_)],Lt(this),w.start()}vt(d),w.wheel=setTimeout(v,E),w.zoom("mouse",i(z(T(m,y),w.mouse[0],w.mouse[1]),w.extent,o));function v(){w.wheel=null,w.end()}}function I(d,...g){if(f||!t.apply(this,arguments))return;var w=d.currentTarget,m=M(this,g,!0).event(d),y=at(d.view).on("mousemove.zoom",N,!0).on("mouseup.zoom",K,!0),_=st(d,w),v=d.clientX,A=d.clientY;Gr(d.view),ee(d),m.mouse=[_,this.__zoom.invert(_)],Lt(this),m.start();function N(P){if(vt(P),!m.moved){var D=P.clientX-v,tt=P.clientY-A;m.moved=D*D+tt*tt>R}m.event(P).zoom("mouse",i(z(m.that.__zoom,m.mouse[0]=st(P,w),m.mouse[1]),m.extent,o))}function K(P){y.on("mousemove.zoom mouseup.zoom",null),Xr(P.view,m.moved),vt(P),m.event(P).end()}}function Y(d,...g){if(t.apply(this,arguments)){var w=this.__zoom,m=st(d.changedTouches?d.changedTouches[0]:d,this),y=w.invert(m),_=w.k*(d.shiftKey?.5:2),v=i(z(T(w,_),m,y),e.apply(this,g),o);vt(d),s>0?at(this).transition().duration(s).call($,v,m,d):at(this).call(k.transform,v,m,d)}}function V(d,...g){if(t.apply(this,arguments)){var w=d.touches,m=w.length,y=M(this,g,d.changedTouches.length===m).event(d),_,v,A,N;for(ee(d),v=0;v<m;++v)A=w[v],N=st(A,this),N=[N,this.__zoom.invert(N),A.identifier],y.touch0?!y.touch1&&y.touch0[2]!==N[2]&&(y.touch1=N,y.taps=0):(y.touch0=N,_=!0,y.taps=1+!!c);c&&(c=clearTimeout(c)),_&&(y.taps<2&&(h=N[0],c=setTimeout(function(){c=null},p)),Lt(this),y.start())}}function x(d,...g){if(this.__zooming){var w=M(this,g).event(d),m=d.changedTouches,y=m.length,_,v,A,N;for(vt(d),_=0;_<y;++_)v=m[_],A=st(v,this),w.touch0&&w.touch0[2]===v.identifier?w.touch0[0]=A:w.touch1&&w.touch1[2]===v.identifier&&(w.touch1[0]=A);if(v=w.that.__zoom,w.touch1){var K=w.touch0[0],P=w.touch0[1],D=w.touch1[0],tt=w.touch1[1],O=(O=D[0]-K[0])*O+(O=D[1]-K[1])*O,et=(et=tt[0]-P[0])*et+(et=tt[1]-P[1])*et;v=T(v,Math.sqrt(O/et)),A=[(K[0]+D[0])/2,(K[1]+D[1])/2],N=[(P[0]+tt[0])/2,(P[1]+tt[1])/2]}else if(w.touch0)A=w.touch0[0],N=w.touch0[1];else return;w.zoom("touch",i(z(v,A,N),w.extent,o))}}function U(d,...g){if(this.__zooming){var w=M(this,g).event(d),m=d.changedTouches,y=m.length,_,v;for(ee(d),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),_=0;_<y;++_)v=m[_],w.touch0&&w.touch0[2]===v.identifier?delete w.touch0:w.touch1&&w.touch1[2]===v.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(v=st(v,this),Math.hypot(h[0]-v[0],h[1]-v[1])<S)){var A=at(this).on("dblclick.zoom");A&&A.apply(this,arguments)}}}return k.wheelDelta=function(d){return arguments.length?(n=typeof d=="function"?d:Nt(+d),k):n},k.filter=function(d){return arguments.length?(t=typeof d=="function"?d:Nt(!!d),k):t},k.touchable=function(d){return arguments.length?(r=typeof d=="function"?d:Nt(!!d),k):r},k.extent=function(d){return arguments.length?(e=typeof d=="function"?d:Nt([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),k):e},k.scaleExtent=function(d){return arguments.length?(a[0]=+d[0],a[1]=+d[1],k):[a[0],a[1]]},k.translateExtent=function(d){return arguments.length?(o[0][0]=+d[0][0],o[1][0]=+d[1][0],o[0][1]=+d[0][1],o[1][1]=+d[1][1],k):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},k.constrain=function(d){return arguments.length?(i=d,k):i},k.duration=function(d){return arguments.length?(s=+d,k):s},k.interpolate=function(d){return arguments.length?(l=d,k):l},k.on=function(){var d=u.on.apply(u,arguments);return d===u?k:d},k.clickDistance=function(d){return arguments.length?(R=(d=+d)*d,k):Math.sqrt(R)},k.tapDistance=function(d){return arguments.length?(S=+d,k):S},k}const hs=[{name:"Hadean",ru:"Катархей",start:4540,end:4e3,color:"#AE1F7A",wikiUrl:"https://en.wikipedia.org/wiki/Hadean",wikiRu:"https://ru.wikipedia.org/wiki/Катархей",eras:[{name:"Early Hadean",ru:"Ранний катархей",start:4540,end:4200,color:"#9E1A6E",wikiUrl:"https://en.wikipedia.org/wiki/Hadean",wikiRu:"https://ru.wikipedia.org/wiki/Катархей",periods:[{name:"Pre-Nectarian",ru:"Донектарий",start:4540,end:4200,color:"#9E1A6E",wikiUrl:"https://en.wikipedia.org/wiki/Pre-Nectarian",wikiRu:"https://ru.wikipedia.org/wiki/Донектарский_период"}]},{name:"Late Hadean",ru:"Поздний катархей",start:4200,end:4e3,color:"#B5297F",wikiUrl:"https://en.wikipedia.org/wiki/Hadean",wikiRu:"https://ru.wikipedia.org/wiki/Катархей",periods:[{name:"Nectarian",ru:"Нектарий",start:4200,end:4e3,color:"#B5297F",wikiUrl:"https://en.wikipedia.org/wiki/Nectarian",wikiRu:"https://ru.wikipedia.org/wiki/Нектарский_период"}]}]},{name:"Archean",ru:"Архей",start:4e3,end:2500,color:"#F0047F",wikiUrl:"https://en.wikipedia.org/wiki/Archean",wikiRu:"https://ru.wikipedia.org/wiki/Архей",eras:[{name:"Eoarchean",ru:"Эоархей",start:4e3,end:3600,color:"#DA037B",wikiUrl:"https://en.wikipedia.org/wiki/Eoarchean",wikiRu:"https://ru.wikipedia.org/wiki/Эоархей",periods:[{name:"Eoarchean",ru:"Эоархей",start:4e3,end:3600,color:"#DA037B",wikiUrl:"https://en.wikipedia.org/wiki/Eoarchean",wikiRu:"https://ru.wikipedia.org/wiki/Эоархей"}]},{name:"Paleoarchean",ru:"Палеоархей",start:3600,end:3200,color:"#F23F97",wikiUrl:"https://en.wikipedia.org/wiki/Paleoarchean",wikiRu:"https://ru.wikipedia.org/wiki/Палеоархей",periods:[{name:"Paleoarchean",ru:"Палеоархей",start:3600,end:3200,color:"#F23F97",wikiUrl:"https://en.wikipedia.org/wiki/Paleoarchean",wikiRu:"https://ru.wikipedia.org/wiki/Палеоархей"}]},{name:"Mesoarchean",ru:"Мезоархей",start:3200,end:2800,color:"#F774AC",wikiUrl:"https://en.wikipedia.org/wiki/Mesoarchean",wikiRu:"https://ru.wikipedia.org/wiki/Мезоархей",periods:[{name:"Mesoarchean",ru:"Мезоархей",start:3200,end:2800,color:"#F774AC",wikiUrl:"https://en.wikipedia.org/wiki/Mesoarchean",wikiRu:"https://ru.wikipedia.org/wiki/Мезоархей"}]},{name:"Neoarchean",ru:"Неоархей",start:2800,end:2500,color:"#F99BC1",wikiUrl:"https://en.wikipedia.org/wiki/Neoarchean",wikiRu:"https://ru.wikipedia.org/wiki/Неоархей",periods:[{name:"Neoarchean",ru:"Неоархей",start:2800,end:2500,color:"#F99BC1",wikiUrl:"https://en.wikipedia.org/wiki/Neoarchean",wikiRu:"https://ru.wikipedia.org/wiki/Неоархей"}]}]},{name:"Proterozoic",ru:"Протерозой",start:2500,end:538.8,color:"#F73F8C",wikiUrl:"https://en.wikipedia.org/wiki/Proterozoic",wikiRu:"https://ru.wikipedia.org/wiki/Протерозой",eras:[{name:"Paleoproterozoic",ru:"Палеопротерозой",start:2500,end:1600,color:"#F74370",wikiUrl:"https://en.wikipedia.org/wiki/Paleoproterozoic",wikiRu:"https://ru.wikipedia.org/wiki/Палеопротерозой",periods:[{name:"Siderian",ru:"Сидерий",start:2500,end:2300,color:"#F6887C",wikiUrl:"https://en.wikipedia.org/wiki/Siderian",wikiRu:"https://ru.wikipedia.org/wiki/Сидерий"},{name:"Rhyacian",ru:"Риасий",start:2300,end:2050,color:"#F6A489",wikiUrl:"https://en.wikipedia.org/wiki/Rhyacian",wikiRu:"https://ru.wikipedia.org/wiki/Риасий"},{name:"Orosirian",ru:"Орозирий",start:2050,end:1800,color:"#F6BC96",wikiUrl:"https://en.wikipedia.org/wiki/Orosirian",wikiRu:"https://ru.wikipedia.org/wiki/Орозирий"},{name:"Statherian",ru:"Статерий",start:1800,end:1600,color:"#F6D4A5",wikiUrl:"https://en.wikipedia.org/wiki/Statherian",wikiRu:"https://ru.wikipedia.org/wiki/Статерий"}]},{name:"Mesoproterozoic",ru:"Мезопротерозой",start:1600,end:1e3,color:"#FDB462",wikiUrl:"https://en.wikipedia.org/wiki/Mesoproterozoic",wikiRu:"https://ru.wikipedia.org/wiki/Мезопротерозой",periods:[{name:"Calymmian",ru:"Калимий",start:1600,end:1400,color:"#FDC07A",wikiUrl:"https://en.wikipedia.org/wiki/Calymmian",wikiRu:"https://ru.wikipedia.org/wiki/Калимий"},{name:"Ectasian",ru:"Эктазий",start:1400,end:1200,color:"#FDCC92",wikiUrl:"https://en.wikipedia.org/wiki/Ectasian",wikiRu:"https://ru.wikipedia.org/wiki/Эктазий"},{name:"Stenian",ru:"Стений",start:1200,end:1e3,color:"#FDD8AA",wikiUrl:"https://en.wikipedia.org/wiki/Stenian",wikiRu:"https://ru.wikipedia.org/wiki/Стений"}]},{name:"Neoproterozoic",ru:"Неопротерозой",start:1e3,end:538.8,color:"#FEB342",wikiUrl:"https://en.wikipedia.org/wiki/Neoproterozoic",wikiRu:"https://ru.wikipedia.org/wiki/Неопротерозой",periods:[{name:"Tonian",ru:"Тоний",start:1e3,end:720,color:"#FEC67A",wikiUrl:"https://en.wikipedia.org/wiki/Tonian",wikiRu:"https://ru.wikipedia.org/wiki/Тоний"},{name:"Cryogenian",ru:"Криогений",start:720,end:635,color:"#FED990",wikiUrl:"https://en.wikipedia.org/wiki/Cryogenian",wikiRu:"https://ru.wikipedia.org/wiki/Криогений"},{name:"Ediacaran",ru:"Эдиакарий",start:635,end:538.8,color:"#FEE6AA",wikiUrl:"https://en.wikipedia.org/wiki/Ediacaran",wikiRu:"https://ru.wikipedia.org/wiki/Эдиакарий"}]}]},{name:"Phanerozoic",ru:"Фанерозой",start:538.8,end:0,color:"#9ED682",wikiUrl:"https://en.wikipedia.org/wiki/Phanerozoic",wikiRu:"https://ru.wikipedia.org/wiki/Фанерозой",eras:[{name:"Paleozoic",ru:"Палеозой",start:538.8,end:251.9,color:"#99C08D",wikiUrl:"https://en.wikipedia.org/wiki/Paleozoic",wikiRu:"https://ru.wikipedia.org/wiki/Палеозой",periods:[{name:"Cambrian",ru:"Кембрий",start:538.8,end:485.4,color:"#7FA056",wikiUrl:"https://en.wikipedia.org/wiki/Cambrian",wikiRu:"https://ru.wikipedia.org/wiki/Кембрийский_период"},{name:"Ordovician",ru:"Ордовик",start:485.4,end:443.8,color:"#009270",wikiUrl:"https://en.wikipedia.org/wiki/Ordovician",wikiRu:"https://ru.wikipedia.org/wiki/Ордовикский_период"},{name:"Silurian",ru:"Силур",start:443.8,end:419.2,color:"#B3E1B6",wikiUrl:"https://en.wikipedia.org/wiki/Silurian",wikiRu:"https://ru.wikipedia.org/wiki/Силурийский_период"},{name:"Devonian",ru:"Девон",start:419.2,end:358.9,color:"#CB8C37",wikiUrl:"https://en.wikipedia.org/wiki/Devonian",wikiRu:"https://ru.wikipedia.org/wiki/Девонский_период"},{name:"Carboniferous",ru:"Карбон",start:358.9,end:298.9,color:"#67A599",wikiUrl:"https://en.wikipedia.org/wiki/Carboniferous",wikiRu:"https://ru.wikipedia.org/wiki/Каменноугольный_период"},{name:"Permian",ru:"Пермь",start:298.9,end:251.9,color:"#F04028",wikiUrl:"https://en.wikipedia.org/wiki/Permian",wikiRu:"https://ru.wikipedia.org/wiki/Пермский_период"}]},{name:"Mesozoic",ru:"Мезозой",start:251.9,end:66,color:"#67C5CA",wikiUrl:"https://en.wikipedia.org/wiki/Mesozoic",wikiRu:"https://ru.wikipedia.org/wiki/Мезозой",periods:[{name:"Triassic",ru:"Триас",start:251.9,end:201.4,color:"#812B92",wikiUrl:"https://en.wikipedia.org/wiki/Triassic",wikiRu:"https://ru.wikipedia.org/wiki/Триасовый_период"},{name:"Jurassic",ru:"Юра",start:201.4,end:145,color:"#34B2C9",wikiUrl:"https://en.wikipedia.org/wiki/Jurassic",wikiRu:"https://ru.wikipedia.org/wiki/Юрский_период"},{name:"Cretaceous",ru:"Мел",start:145,end:66,color:"#7FC64E",wikiUrl:"https://en.wikipedia.org/wiki/Cretaceous",wikiRu:"https://ru.wikipedia.org/wiki/Меловой_период"}]},{name:"Cenozoic",ru:"Кайнозой",start:66,end:0,color:"#F2F91D",wikiUrl:"https://en.wikipedia.org/wiki/Cenozoic",wikiRu:"https://ru.wikipedia.org/wiki/Кайнозой",periods:[{name:"Paleogene",ru:"Палеоген",start:66,end:23.03,color:"#FD9A52",wikiUrl:"https://en.wikipedia.org/wiki/Paleogene",wikiRu:"https://ru.wikipedia.org/wiki/Палеогеновый_период"},{name:"Neogene",ru:"Неоген",start:23.03,end:2.58,color:"#FFE619",wikiUrl:"https://en.wikipedia.org/wiki/Neogene",wikiRu:"https://ru.wikipedia.org/wiki/Неогеновый_период"},{name:"Quaternary",ru:"Четвертичный",start:2.58,end:0,color:"#F9F97F",wikiUrl:"https://en.wikipedia.org/wiki/Quaternary",wikiRu:"https://ru.wikipedia.org/wiki/Четвертичный_период"}]}]}],fs=hs,ds=JSON.parse(`[{"name":"Formation of Earth","ru":"Формирование Земли","date":4540,"type":"planetary","description":"Accretion of Earth from the solar nebula over millions of years.","descRu":"Аккреция Земли из солнечной туманности в результате столкновений планетезималей.","wikiUrl":"https://en.wikipedia.org/wiki/History_of_Earth","wikiRu":"https://ru.wikipedia.org/wiki/История_Земли"},{"name":"Formation of the Moon","ru":"Формирование Луны","date":4510,"type":"planetary","description":"A Mars-sized body (Theia) collides with proto-Earth, ejecting debris that forms the Moon.","descRu":"Тело размером с Марс (Тейя) сталкивается с прото-Землёй, выбрасывая обломки, из которых формируется Луна.","wikiUrl":"https://en.wikipedia.org/wiki/Giant-impact_hypothesis","wikiRu":"https://ru.wikipedia.org/wiki/Гипотеза_гигантского_столкновения"},{"name":"First Liquid Oceans","ru":"Первые океаны","date":4400,"type":"planetary","description":"Water condenses on Earth's cooling surface. Zircon crystals provide evidence.","descRu":"Вода конденсируется на остывающей поверхности Земли. Кристаллы циркона — свидетельство.","wikiUrl":"https://en.wikipedia.org/wiki/Origin_of_water_on_Earth","wikiRu":"https://ru.wikipedia.org/wiki/Происхождение_воды_на_Земле"},{"name":"Late Heavy Bombardment","ru":"Поздняя тяжёлая бомбардировка","date":4100,"type":"planetary","description":"A spike in asteroid impacts scarring the inner solar system.","descRu":"Всплеск астероидной бомбардировки внутренней Солнечной системы.","wikiUrl":"https://en.wikipedia.org/wiki/Late_Heavy_Bombardment","wikiRu":"https://ru.wikipedia.org/wiki/Поздняя_тяжёлая_бомбардировка"},{"name":"Origin of Life","ru":"Зарождение жизни","date":3800,"type":"origin","description":"Isotopic signatures suggest primitive microorganisms existed 3.8 billion years ago.","descRu":"Изотопные следы указывают на существование примитивных микроорганизмов 3,8 млрд лет назад.","wikiUrl":"https://en.wikipedia.org/wiki/Abiogenesis","wikiRu":"https://ru.wikipedia.org/wiki/Абиогенез"},{"name":"First Photosynthesis","ru":"Первый фотосинтез","date":3500,"type":"origin","description":"Cyanobacteria evolve oxygenic photosynthesis, transforming Earth's atmosphere.","descRu":"Цианобактерии вырабатывают кислородный фотосинтез, начиная преобразование атмосферы.","wikiUrl":"https://en.wikipedia.org/wiki/Photosynthesis#Early_evolution","wikiRu":"https://ru.wikipedia.org/wiki/Фотосинтез"},{"name":"Great Oxidation Event","ru":"Кислородная катастрофа","date":2400,"type":"planetary","description":"Oxygen accumulates in atmosphere for the first time, causing mass die-off of anaerobic life.","descRu":"Кислород впервые накапливается в атмосфере, вызывая массовую гибель анаэробных организмов.","wikiUrl":"https://en.wikipedia.org/wiki/Great_Oxidation_Event","wikiRu":"https://ru.wikipedia.org/wiki/Кислородная_катастрофа"},{"name":"Huronian Glaciation","ru":"Гуронское оледенение","date":2400,"type":"planetary","description":"The longest ice age in Earth's history, lasting ~300 million years (2,400–2,100 Ma). Triggered by the Great Oxidation Event: rising oxygen destroyed atmospheric methane, causing temperatures to plummet and ice sheets to engulf much of the planet, possibly reaching the equator.","descRu":"Самый длительный ледниковый период в истории Земли, продолжавшийся ~300 млн лет (2 400–2 100 млн лет назад). Вызван кислородной катастрофой: нарастающий кислород разрушил атмосферный метан, температура резко упала, а ледники покрыли большую часть планеты, возможно, дойдя до экватора.","wikiUrl":"https://en.wikipedia.org/wiki/Huronian_glaciation","wikiRu":"https://ru.wikipedia.org/wiki/Гуронское_оледенение"},{"name":"First Eukaryotes","ru":"Первые эукариоты","date":2100,"type":"origin","description":"Cells with nuclei appear — likely through endosymbiosis. Pivotal step toward complex life.","descRu":"Появляются клетки с ядром — вероятно, через эндосимбиоз. Ключевой шаг к сложной жизни.","wikiUrl":"https://en.wikipedia.org/wiki/Eukaryote","wikiRu":"https://ru.wikipedia.org/wiki/Эукариоты"},{"name":"First Multicellular Life","ru":"Первые многоклеточные","date":1500,"type":"origin","description":"Simple multicellular organisms emerge with cooperating, specializing cells.","descRu":"Появляются простые многоклеточные организмы с кооперирующимися клетками.","wikiUrl":"https://en.wikipedia.org/wiki/Multicellular_organism","wikiRu":"https://ru.wikipedia.org/wiki/Многоклеточный_организм"},{"name":"Formation of Rodinia","ru":"Формирование Родинии","date":1100,"type":"planetary","description":"Earth's landmasses converged into the supercontinent Rodinia, with proto-North America (Laurentia) at its core, surrounded by proto-South America, Africa, India, Australia, Antarctica, Siberia, and Baltica. Closed ancient ocean basins and fundamentally altered climate patterns for hundreds of millions of years.","descRu":"Массивы суши сошлись в суперконтинент Родиния с прото-Северной Америкой (Лаврентией) в центре, окружённой прото-Южной Америкой, Африкой, Индией, Австралией, Антарктидой, Сибирью и Балтикой. Закрыл древние океанические бассейны и кардинально изменил климатические паттерны на сотни миллионов лет.","wikiUrl":"https://en.wikipedia.org/wiki/Rodinia","wikiRu":"https://ru.wikipedia.org/wiki/Родиния"},{"name":"Breakup of Rodinia","ru":"Распад Родинии","date":750,"type":"planetary","description":"Rifted apart over 150 million years, opening new ocean basins. Exposed vast volcanic rock to weathering, drawing down CO₂ and likely triggering the Snowball Earth glaciations (Sturtian and Marinoan) that froze the planet to the equator.","descRu":"Раскололась за 150 млн лет, открыв новые океанические бассейны. Обнажила обширные вулканические породы для выветривания, поглощавшего CO₂, и, вероятно, запустила оледенения «Земля-снежок» (Стуртское и Мариноанское), заморозившие планету до экватора.","wikiUrl":"https://en.wikipedia.org/wiki/Rodinia","wikiRu":"https://ru.wikipedia.org/wiki/Родиния"},{"name":"Snowball Earth (Sturtian)","ru":"Земля-снежок (Стуртское)","date":717,"type":"planetary","description":"Earth freezes almost entirely, ice reaching the equator.","descRu":"Земля почти полностью замерзает, лёд доходит до экватора.","wikiUrl":"https://en.wikipedia.org/wiki/Snowball_Earth","wikiRu":"https://ru.wikipedia.org/wiki/Земля-снежок"},{"name":"Snowball Earth (Marinoan)","ru":"Земля-снежок (Мариноанское)","date":650,"type":"planetary","description":"A second global glaciation. May have driven the evolution of the first animals.","descRu":"Второе глобальное оледенение. Возможно, подтолкнуло эволюцию первых животных.","wikiUrl":"https://en.wikipedia.org/wiki/Snowball_Earth","wikiRu":"https://ru.wikipedia.org/wiki/Земля-снежок"},{"name":"First Animals","ru":"Первые животные","date":600,"type":"origin","description":"The Ediacaran biota — Earth's first complex animals: soft-bodied, unlike anything alive today.","descRu":"Эдиакарская биота — первые сложные животные Земли: мягкотелые, не похожие ни на что современное.","wikiUrl":"https://en.wikipedia.org/wiki/Ediacaran_biota","wikiRu":"https://ru.wikipedia.org/wiki/Эдиакарская_биота"},{"name":"Cambrian Explosion","ru":"Кембрийский взрыв","date":538,"type":"origin","description":"Nearly all modern animal phyla appear in ~20 million years.","descRu":"Почти все современные типы животных появляются за ~20 миллионов лет.","wikiUrl":"https://en.wikipedia.org/wiki/Cambrian_explosion","wikiRu":"https://ru.wikipedia.org/wiki/Кембрийский_взрыв"},{"name":"First Fish","ru":"Первые рыбы","date":530,"type":"origin","description":"Jawless fish — the first vertebrates, ancestors of all vertebrates including humans.","descRu":"Бесчелюстные рыбы — первые позвоночные, предки всех позвоночных, включая человека.","wikiUrl":"https://en.wikipedia.org/wiki/Ostracoderm","wikiRu":"https://ru.wikipedia.org/wiki/Остракодермы"},{"name":"First Land Plants","ru":"Первые наземные растения","date":470,"type":"origin","description":"Simple plants colonize land, beginning the greening of Earth's continents.","descRu":"Простые растения заселяют сушу, начиная озеленение континентов.","wikiUrl":"https://en.wikipedia.org/wiki/Evolutionary_history_of_plants","wikiRu":"https://ru.wikipedia.org/wiki/Эволюция_растений"},{"name":"First Insects","ru":"Первые насекомые","date":407,"type":"origin","description":"The oldest known insects — the most species-rich lineage on Earth.","descRu":"Древнейшие известные насекомые — самая многовидовая группа на Земле.","wikiUrl":"https://en.wikipedia.org/wiki/Insect#Evolution","wikiRu":"https://ru.wikipedia.org/wiki/Насекомые"},{"name":"First Amphibians","ru":"Первые амфибии","date":370,"type":"origin","description":"Fish with limb-like fins crawl onto land — Tiktaalik bridges water and land.","descRu":"Рыбы с конечностеподобными плавниками выходят на сушу — тиктаалик связывает воду и землю.","wikiUrl":"https://en.wikipedia.org/wiki/Amphibian","wikiRu":"https://ru.wikipedia.org/wiki/Земноводные"},{"name":"Formation of Pangaea","ru":"Формирование Пангеи","date":335,"type":"planetary","description":"Earth's last supercontinent assembled as Gondwana, Euramerica, and Siberia collided. The C-shaped landmass bordered by Paleo-Tethys and superocean Panthalassa. Reduced coastlines and shallow marine habitats, expanding interior deserts — profoundly reshaping global biodiversity.","descRu":"Последний суперконтинент Земли собрался при столкновении Гондваны, Еврамерики и Сибири. С-образный массив суши, окружённый Палео-Тетисом и суперокеаном Панталасса. Сократил береговые линии и мелководные морские местообитания, расширив внутренние пустыни — кардинально перекроив глобальное биоразнообразие.","wikiUrl":"https://en.wikipedia.org/wiki/Pangaea","wikiRu":"https://ru.wikipedia.org/wiki/Пангея"},{"name":"First Reptiles","ru":"Первые рептилии","date":312,"type":"origin","description":"Amniotic eggs free vertebrates from water. Reptiles radiate across Pangaea.","descRu":"Амниотическое яйцо освобождает позвоночных от воды. Рептилии расселяются по Пангее.","wikiUrl":"https://en.wikipedia.org/wiki/Reptile","wikiRu":"https://ru.wikipedia.org/wiki/Пресмыкающиеся"},{"name":"Capitanian Extinction","ru":"Капитанское вымирание","date":260,"type":"extinction","severity":62,"description":"The 'forgotten' mass extinction, overshadowed by End-Permian just 8 million years later. Emeishan Traps erupted 250,000–500,000 km² of basalt in present-day China, wiping out ~62% of marine species including 87% of brachiopods and 82% of fusulinid foraminifera.","descRu":"«Забытое» массовое вымирание, затенённое пермским всего 8 млн лет спустя. Эмейшаньские траппы извергли 250 000–500 000 км² базальта на территории современного Китая, уничтожив ~62% морских видов, включая 87% брахиопод и 82% фузулиновых фораминифер.","wikiUrl":"https://en.wikipedia.org/wiki/Capitanian_mass_extinction_event","wikiRu":"https://ru.wikipedia.org/wiki/Капитанское_массовое_вымирание"},{"name":"First Dinosaurs","ru":"Первые динозавры","date":233,"type":"origin","description":"Small bipedal dinosaurs appear. Within 30 million years they dominate all land ecosystems.","descRu":"Появляются небольшие двуногие динозавры. Через 30 млн лет они доминируют на суше.","wikiUrl":"https://en.wikipedia.org/wiki/Dinosaur","wikiRu":"https://ru.wikipedia.org/wiki/Динозавры"},{"name":"First Mammals","ru":"Первые млекопитающие","date":225,"type":"origin","description":"Tiny nocturnal mammals evolve alongside early dinosaurs. Small for 160 million years.","descRu":"Крошечные ночные млекопитающие появляются рядом с динозаврами. Остаются мелкими 160 млн лет.","wikiUrl":"https://en.wikipedia.org/wiki/Mammal","wikiRu":"https://ru.wikipedia.org/wiki/Млекопитающие"},{"name":"First Birds","ru":"Первые птицы","date":160,"type":"origin","description":"Feathered dinosaurs take flight. Archaeopteryx — ancestor of all modern birds.","descRu":"Оперённые динозавры поднимаются в воздух. Археоптерикс — предок всех современных птиц.","wikiUrl":"https://en.wikipedia.org/wiki/Bird","wikiRu":"https://ru.wikipedia.org/wiki/Птицы"},{"name":"First Flowering Plants","ru":"Первые цветковые","date":130,"type":"origin","description":"Angiosperms appear, co-evolving with insect pollinators.","descRu":"Появляются покрытосеменные, ко-эволюционируя с насекомыми-опылителями.","wikiUrl":"https://en.wikipedia.org/wiki/Flowering_plant","wikiRu":"https://ru.wikipedia.org/wiki/Цветковые_растения"},{"name":"First Grasses","ru":"Первые злаки","date":66,"type":"origin","description":"Grasses evolve, eventually reshaping continents into vast grasslands.","descRu":"Появляются злаки, со временем превращающие континенты в обширные степи.","wikiUrl":"https://en.wikipedia.org/wiki/Poaceae","wikiRu":"https://ru.wikipedia.org/wiki/Злаки"},{"name":"First Primates","ru":"Первые приматы","date":55,"type":"origin","description":"Small tree-dwelling primates with grasping hands and forward-facing eyes.","descRu":"Мелкие древесные приматы с цепкими руками и направленными вперёд глазами.","wikiUrl":"https://en.wikipedia.org/wiki/Primate","wikiRu":"https://ru.wikipedia.org/wiki/Приматы"},{"name":"First Hominids","ru":"Первые гоминиды","date":7,"type":"origin","description":"Human lineage splits from chimpanzees. Sahelanthropus walks upright.","descRu":"Линия человека отделяется от шимпанзе. Сахелантроп ходит прямо.","wikiUrl":"https://en.wikipedia.org/wiki/Hominidae","wikiRu":"https://ru.wikipedia.org/wiki/Гоминиды"},{"name":"First Stone Tools","ru":"Первые каменные орудия","date":3.3,"type":"origin","description":"Oldest stone tools (Lomekwian) in Kenya, predating the genus Homo.","descRu":"Древнейшие каменные орудия (Ломеквиан) в Кении, старше рода Homo.","wikiUrl":"https://en.wikipedia.org/wiki/Lomekwian","wikiRu":"https://ru.wikipedia.org/wiki/Ломеквийская_культура"},{"name":"Homo Sapiens","ru":"Человек разумный","date":0.3,"type":"origin","description":"Anatomically modern humans appear in Africa ~300,000 years ago.","descRu":"Анатомически современные люди появляются в Африке ~300 000 лет назад.","wikiUrl":"https://en.wikipedia.org/wiki/Homo_sapiens","wikiRu":"https://ru.wikipedia.org/wiki/Человек_разумный"},{"name":"Agriculture","ru":"Земледелие","date":0.012,"type":"origin","description":"Humans domesticate plants and animals ~12,000 years ago, launching civilization.","descRu":"Люди одомашнивают растения и животных ~12 000 лет назад, начиная цивилизацию.","wikiUrl":"https://en.wikipedia.org/wiki/Neolithic_Revolution","wikiRu":"https://ru.wikipedia.org/wiki/Неолитическая_революция"},{"name":"Holocene Extinction","ru":"Голоценовое вымирание","date":0.01,"type":"extinction","severity":30,"description":"The ongoing sixth mass extinction, driven by human activity. Species loss runs 100–1,000× the background rate. Since the Ice Age: mammoths, saber-toothed cats, giant sloths gone. In recorded history: dodo, passenger pigeon, Tasmanian tiger. IUCN Red List: 48,000+ species threatened — 41% of amphibians, 26% of mammals.","descRu":"Продолжающееся шестое массовое вымирание, вызванное деятельностью человека. Скорость исчезновения видов превышает фоновую в 100–1 000 раз. Со времён ледникового периода: мамонты, саблезубые кошки, гигантские ленивцы. В записанной истории: додо, странствующий голубь, тасманийский тигр. Красная книга МСОП: 48 000+ видов под угрозой — 41% амфибий, 26% млекопитающих.","wikiUrl":"https://en.wikipedia.org/wiki/Holocene_extinction","wikiRu":"https://ru.wikipedia.org/wiki/Голоценовое_вымирание"},{"name":"Written History","ru":"Письменная история","date":0.005,"type":"origin","description":"Writing invented in Sumer ~5,000 years ago. All 'recorded history' fits in this sliver.","descRu":"Письменность изобретена в Шумере ~5 000 лет назад. Вся «записанная история» — в этой щели.","wikiUrl":"https://en.wikipedia.org/wiki/Recorded_history","wikiRu":"https://ru.wikipedia.org/wiki/Письменная_история"},{"name":"End-Ordovician Extinction","ru":"Ордовикское вымирание","date":444,"type":"extinction","severity":86,"description":"~86% of species lost. Glaciation devastates marine life.","descRu":"~86% видов погибло. Оледенение опустошает морскую жизнь.","wikiUrl":"https://en.wikipedia.org/wiki/Ordovician%E2%80%93Silurian_extinction_events","wikiRu":"https://ru.wikipedia.org/wiki/Ордовикско-силурийское_вымирание"},{"name":"Late Devonian Extinction","ru":"Девонское вымирание","date":372,"type":"extinction","severity":75,"description":"~75% of species lost. Reef ecosystems collapse.","descRu":"~75% видов погибло. Рифовые экосистемы рушатся.","wikiUrl":"https://en.wikipedia.org/wiki/Late_Devonian_extinction","wikiRu":"https://ru.wikipedia.org/wiki/Девонское_вымирание"},{"name":"End-Permian Extinction","ru":"Пермское вымирание","date":252,"type":"extinction","severity":96,"description":"The 'Great Dying' — ~96% of marine species perish. Worst mass extinction ever.","descRu":"«Великое вымирание» — ~96% морских видов погибает. Крупнейшее вымирание в истории.","wikiUrl":"https://en.wikipedia.org/wiki/Permian%E2%80%93Triassic_extinction_event","wikiRu":"https://ru.wikipedia.org/wiki/Массовое_пермское_вымирание"},{"name":"End-Triassic Extinction","ru":"Триасовое вымирание","date":201,"type":"extinction","severity":80,"description":"~80% of species lost. Clears the way for dinosaur dominance.","descRu":"~80% видов погибло. Расчищает путь для доминирования динозавров.","wikiUrl":"https://en.wikipedia.org/wiki/Triassic%E2%80%93Jurassic_extinction_event","wikiRu":"https://ru.wikipedia.org/wiki/Триасовое_вымирание"},{"name":"Breakup of Pangaea","ru":"Распад Пангеи","date":200,"type":"planetary","description":"CAMP (Central Atlantic Magmatic Province) — one of the largest volcanic events ever — erupted across 11 million km², opening the Atlantic Ocean. Closely linked to the End-Triassic extinction. Continental separation isolated populations, driving evolution of distinct faunas and shaping modern biogeography.","descRu":"CAMP (Центрально-Атлантическая магматическая провинция) — одно из крупнейших вулканических событий в истории — извержения на 11 млн км², открывшие Атлантический океан. Тесно связан с триасовым вымиранием. Разделение континентов изолировало популяции, направляя эволюцию уникальных фаун и формируя современную биогеографию.","wikiUrl":"https://en.wikipedia.org/wiki/Pangaea","wikiRu":"https://ru.wikipedia.org/wiki/Пангея"},{"name":"End-Cretaceous Extinction","ru":"Мел-палеогеновое вымирание","date":66,"type":"extinction","severity":76,"description":"~76% of species lost including all non-avian dinosaurs. Mammals inherit the Earth.","descRu":"~76% видов погибло, включая всех нептичьих динозавров. Млекопитающие наследуют Землю.","wikiUrl":"https://en.wikipedia.org/wiki/Cretaceous%E2%80%93Paleogene_extinction_event","wikiRu":"https://ru.wikipedia.org/wiki/Мел-палеогеновое_вымирание"}]`),ii=ds,ps=JSON.parse(`[{"name":"Archaea","ru":"Археи","start":4000,"end":3500,"color":"#7b1fa2","description":"Among the earliest life forms, archaea are single-celled extremophiles thriving in boiling hot springs, deep-sea hydrothermal vents, and hypersaline lakes. Though superficially similar to bacteria, they have fundamentally different cell membrane chemistry, constituting their own domain of life. Biomarkers in 3.8-billion-year-old Greenland sediments suggest they were present almost as soon as Earth's crust cooled.","descRu":"Одни из древнейших форм жизни — одноклеточные экстремофилы, обитающие в кипящих горячих источниках, глубоководных гидротермальных жерлах и гиперсолёных озёрах. Хотя внешне похожи на бактерий, имеют принципиально иную химию клеточных мембран и выделены в отдельный домен жизни. Биомаркеры в 3,8-миллиардолетних породах Гренландии указывают, что они появились почти сразу после остывания земной коры.","wikiUrl":"https://en.wikipedia.org/wiki/Archaea","wikiRu":"https://ru.wikipedia.org/wiki/Археи"},{"name":"Cyanobacteria","ru":"Цианобактерии","start":3500,"end":1800,"color":"#2e7d32","description":"Photosynthetic bacteria that oxygenated Earth's atmosphere.","descRu":"Фотосинтезирующие бактерии, насытившие атмосферу кислородом.","wikiUrl":"https://en.wikipedia.org/wiki/Cyanobacteria","wikiRu":"https://ru.wikipedia.org/wiki/Цианобактерии"},{"name":"Stromatolites","ru":"Строматолиты","start":3500,"end":1000,"color":"#388e3c","description":"Layered microbial mats — dominant reef-builders for 2+ billion years.","descRu":"Слоистые микробные маты — главные рифостроители 2+ млрд лет.","wikiUrl":"https://en.wikipedia.org/wiki/Stromatolite","wikiRu":"https://ru.wikipedia.org/wiki/Строматолиты"},{"name":"Fungi","ru":"Грибы","start":810,"end":0,"color":"#8d6e63","description":"Over 90% of land plants depend on mycorrhizal fungi for nutrient uptake, a symbiosis dating back 450 million years. In the Devonian, Prototaxites formed mysterious 8-meter-tall trunk-like structures — the largest organisms on land before trees. With an estimated 2–4 million species (only ~150,000 described), fungi remain one of the least explored kingdoms.","descRu":"Более 90% наземных растений зависят от микоризных грибов для поглощения питательных веществ — симбиоз, которому 450 млн лет. В девоне Prototaxites формировали загадочные 8-метровые стволоподобные структуры — крупнейшие организмы на суше до появления деревьев. С предполагаемыми 2–4 млн видов (описано лишь ~150 000) грибы остаются одним из наименее изученных царств.","wikiUrl":"https://en.wikipedia.org/wiki/Fungus","wikiRu":"https://ru.wikipedia.org/wiki/Грибы"},{"name":"Corals","ru":"Кораллы","start":535,"end":0,"color":"#ef6c00","description":"Coral reefs cover less than 1% of the seafloor yet harbor over 25% of all marine species — 'rainforests of the sea.' Paleozoic tabulate and rugose corals were wiped out in the Permian; modern scleractinians arose independently in the Triassic. The Great Barrier Reef, the largest living structure on Earth, stretches over 2,300 km.","descRu":"Коралловые рифы покрывают менее 1% морского дна, но укрывают более 25% всех морских видов — «дождевые леса моря». Палеозойские табуляты и ругозы были уничтожены в перми; современные склерактинии возникли независимо в триасе. Большой Барьерный риф — крупнейшая живая структура на Земле — протянулся более чем на 2 300 км.","wikiUrl":"https://en.wikipedia.org/wiki/Coral","wikiRu":"https://ru.wikipedia.org/wiki/Коралловые_полипы"},{"name":"Brachiopods","ru":"Брахиоподы","start":530,"end":252,"color":"#78909c","description":"Rulers of Paleozoic seafloors with over 30,000 fossil species, often mistaken for bivalves but an entirely separate phylum with a unique lophophore feeding organ. At their peak they carpeted every marine habitat. The Permian extinction obliterated over 90% of their lineages; only ~400 species survive today.","descRu":"Властители палеозойского морского дна: более 30 000 ископаемых видов, часто путаемые с двустворчатыми моллюсками, но на самом деле отдельный тип с уникальным лофофором. На пике расцвета они покрывали все морские местообитания. Пермское вымирание уничтожило более 90% их линий; сегодня выживает лишь ~400 видов.","wikiUrl":"https://en.wikipedia.org/wiki/Brachiopod","wikiRu":"https://ru.wikipedia.org/wiki/Брахиоподы"},{"name":"Trilobites","ru":"Трилобиты","start":521,"end":252,"color":"#5d4037","description":"Armored arthropods, 270 million years, 20,000+ species.","descRu":"Панцирные членистоногие, 270 млн лет, 20 000+ видов.","wikiUrl":"https://en.wikipedia.org/wiki/Trilobite","wikiRu":"https://ru.wikipedia.org/wiki/Трилобиты"},{"name":"Eurypterids","ru":"Ракоскорпионы","start":470,"end":252,"color":"#6d4c41","description":"Giant sea scorpions — top predators up to 2.5m.","descRu":"Гигантские морские скорпионы — хищники до 2,5 м.","wikiUrl":"https://en.wikipedia.org/wiki/Eurypterid","wikiRu":"https://ru.wikipedia.org/wiki/Ракоскорпионы"},{"name":"Placoderms","ru":"Плакодермы","start":440,"end":359,"color":"#455a64","description":"First jawed vertebrates. Dunkleosteus: 6m, strongest bite.","descRu":"Первые челюстные позвоночные. Дунклеостей: 6 м, сильнейший укус.","wikiUrl":"https://en.wikipedia.org/wiki/Placodermi","wikiRu":"https://ru.wikipedia.org/wiki/Плакодермы"},{"name":"Sharks","ru":"Акулы","start":420,"end":0,"color":"#546e7a","description":"Apex ocean predators for 400+ million years — older than trees.","descRu":"Вершинные хищники океана 400+ млн лет — старше деревьев.","wikiUrl":"https://en.wikipedia.org/wiki/Shark","wikiRu":"https://ru.wikipedia.org/wiki/Акулы"},{"name":"Insects","ru":"Насекомые","start":407,"end":0,"color":"#827717","description":"Over 1 million described species (5–10 million estimated) — more than all other animal groups combined. Carboniferous O₂ at 31% fueled giants like Meganeura with 70 cm wingspan. Co-evolution with flowering plants produced the most intricate web of mutual dependencies in nature.","descRu":"Более 1 млн описанных видов (по оценкам, 5–10 млн) — больше, чем у всех остальных групп животных вместе взятых. Кислород карбона (31%) породил гигантов вроде Meganeura с размахом крыльев 70 см. Коэволюция с цветковыми растениями создала самую сложную сеть взаимозависимостей в природе.","wikiUrl":"https://en.wikipedia.org/wiki/Insect","wikiRu":"https://ru.wikipedia.org/wiki/Насекомые"},{"name":"Ferns & Lycopsids","ru":"Папоротники и плауны","start":390,"end":300,"color":"#33691e","description":"Giant tree ferns dominate Carboniferous swamps, forming today's coal.","descRu":"Гигантские древовидные папоротники господствуют в каменноугольных болотах.","wikiUrl":"https://en.wikipedia.org/wiki/Carboniferous_rainforest_collapse","wikiRu":"https://ru.wikipedia.org/wiki/Каменноугольный_период"},{"name":"Amphibians (dominant)","ru":"Амфибии (доминир.)","start":340,"end":280,"color":"#558b2f","description":"Large amphibians rule coal swamps. Eryops: 2m apex predator.","descRu":"Крупные амфибии правят угольными болотами. Эриопс: 2 м хищник.","wikiUrl":"https://en.wikipedia.org/wiki/Temnospondyli","wikiRu":"https://ru.wikipedia.org/wiki/Темноспондильные"},{"name":"Conifers","ru":"Хвойные","start":310,"end":0,"color":"#1b5e20","description":"Dominated Earth's landscapes for 200+ million years before flowering plants. Include the largest organisms by volume ever — giant sequoia 'General Sherman' at 84 m, 1,487 m³. Today ~630 species clothe the boreal forests, Earth's largest terrestrial biome.","descRu":"Доминировали в ландшафтах Земли 200+ млн лет до появления цветковых. Включают крупнейшие по объёму организмы в истории — гигантская секвойя «Генерал Шерман» высотой 84 м, объёмом 1 487 м³. Сегодня ~630 видов одевают бореальные леса — крупнейший наземный биом Земли.","wikiUrl":"https://en.wikipedia.org/wiki/Conifer","wikiRu":"https://ru.wikipedia.org/wiki/Хвойные"},{"name":"Synapsids","ru":"Синапсиды","start":310,"end":252,"color":"#795548","description":"Proto-mammals including Dimetrodon. Our direct ancestors.","descRu":"Протомлекопитающие, включая диметродона. Наши прямые предки.","wikiUrl":"https://en.wikipedia.org/wiki/Synapsid","wikiRu":"https://ru.wikipedia.org/wiki/Синапсиды"},{"name":"Ichthyosaurs","ru":"Ихтиозавры","start":250,"end":90,"color":"#0d47a1","description":"'Fish-lizards' with dolphin-like bodies through convergent evolution, reaching ~40 km/h. Temnodontosaurus had 26 cm eyes — largest of any known animal — for deep-ocean hunting. Shonisaurus sikanniensis at 21 m was the largest marine reptile ever, giving live birth in open water.","descRu":"«Рыбоящеры» с дельфиноподобным телом благодаря конвергентной эволюции, развивавшие ~40 км/ч. Темнодонтозавр имел 26-сантиметровые глаза — крупнейшие у любого известного животного — для охоты в глубинах океана. Шонизавр сиканниенсис длиной 21 м — крупнейшая морская рептилия в истории, рожавшая живых детёнышей в открытом море.","wikiUrl":"https://en.wikipedia.org/wiki/Ichthyosaur","wikiRu":"https://ru.wikipedia.org/wiki/Ихтиозавры"},{"name":"Dinosaurs","ru":"Динозавры","start":233,"end":66,"color":"#e65100","description":"Dominant land animals for 167 million years.","descRu":"Доминирующие наземные животные 167 млн лет.","wikiUrl":"https://en.wikipedia.org/wiki/Dinosaur","wikiRu":"https://ru.wikipedia.org/wiki/Динозавры"},{"name":"Plesiosaurs","ru":"Плезиозавры","start":203,"end":66,"color":"#1565c0","description":"'Flew' through water using four flippers — unique vertebrate locomotion. Elasmosaurus stretched over 10 m with a 7 m neck containing 72 vertebrae — more than any other animal. Their silhouette inspired sea monster legends from Loch Ness to Scandinavia.","descRu":"«Летали» сквозь воду с помощью четырёх ласт — уникальный для позвоночных способ передвижения. Эласмозавр достигал 10 м в длину с 7-метровой шеей из 72 позвонков — больше, чем у любого другого животного. Их силуэт вдохновил легенды о морских чудовищах от Лох-Несса до Скандинавии.","wikiUrl":"https://en.wikipedia.org/wiki/Plesiosauria","wikiRu":"https://ru.wikipedia.org/wiki/Плезиозавры"},{"name":"Pterosaurs","ru":"Птерозавры","start":228,"end":66,"color":"#bf360c","description":"First flying vertebrates. Quetzalcoatlus: 10m wingspan.","descRu":"Первые летающие позвоночные. Кетцалькоатль: размах крыльев 10 м.","wikiUrl":"https://en.wikipedia.org/wiki/Pterosaur","wikiRu":"https://ru.wikipedia.org/wiki/Птерозавры"},{"name":"Ammonites","ru":"Аммониты","start":400,"end":66,"color":"#4e342e","description":"Coiled cephalopods thriving 340 million years.","descRu":"Спиральные головоногие, процветавшие 340 млн лет.","wikiUrl":"https://en.wikipedia.org/wiki/Ammonoidea","wikiRu":"https://ru.wikipedia.org/wiki/Аммониты"},{"name":"Mosasaurs","ru":"Мозазавры","start":100,"end":66,"color":"#283593","description":"Despite ruling oceans for only 34 million years, diversified into 40+ genera worldwide. Mosasaurus hoffmannii reached 13 m — yet they were giant lizards related to modern monitors, not dinosaurs. The first mosasaur jaw (Maastricht, 1764) helped convince scientists that extinction was real.","descRu":"Несмотря на владычество в океанах лишь 34 млн лет, расселились в 40+ родов по всему миру. Мозазавр Гофмана достигал 13 м — но это были гигантские ящерицы, родственные современным варанам, а не динозавры. Первая челюсть мозазавра (Маастрихт, 1764) помогла убедить учёных в реальности вымирания.","wikiUrl":"https://en.wikipedia.org/wiki/Mosasaur","wikiRu":"https://ru.wikipedia.org/wiki/Мозазавры"},{"name":"Mammals (dominant)","ru":"Млекопитающие (доминир.)","start":66,"end":0,"color":"#d84315","description":"After K-Pg, mammals fill every niche left by dinosaurs.","descRu":"После мел-палеогенового вымирания млекопитающие занимают все ниши.","wikiUrl":"https://en.wikipedia.org/wiki/Mammal","wikiRu":"https://ru.wikipedia.org/wiki/Млекопитающие"},{"name":"Birds","ru":"Птицы","start":66,"end":0,"color":"#00838f","description":"The only surviving dinosaurs. 10,000+ species.","descRu":"Единственные выжившие динозавры. 10 000+ видов.","wikiUrl":"https://en.wikipedia.org/wiki/Bird","wikiRu":"https://ru.wikipedia.org/wiki/Птицы"},{"name":"Flowering Plants","ru":"Цветковые растения","start":130,"end":0,"color":"#c62828","description":"90% of all plant species today are angiosperms.","descRu":"90% всех видов растений сегодня — покрытосеменные.","wikiUrl":"https://en.wikipedia.org/wiki/Flowering_plant","wikiRu":"https://ru.wikipedia.org/wiki/Цветковые_растения"},{"name":"Grasses","ru":"Злаки","start":55,"end":0,"color":"#9e9d24","description":"Grasslands reshape continents, driving grazer evolution.","descRu":"Степи преобразуют континенты, направляя эволюцию травоядных.","wikiUrl":"https://en.wikipedia.org/wiki/Poaceae","wikiRu":"https://ru.wikipedia.org/wiki/Злаки"},{"name":"Whales","ru":"Киты","start":50,"end":0,"color":"#0277bd","description":"From dog-sized land mammals to the largest animals ever.","descRu":"От наземных млекопитающих размером с собаку — до крупнейших животных в истории.","wikiUrl":"https://en.wikipedia.org/wiki/Whale","wikiRu":"https://ru.wikipedia.org/wiki/Китообразные"},{"name":"Great Apes","ru":"Человекообразные","start":15,"end":0,"color":"#4a148c","description":"Orangutans, gorillas, chimps, and humans.","descRu":"Орангутаны, гориллы, шимпанзе и люди.","wikiUrl":"https://en.wikipedia.org/wiki/Hominidae","wikiRu":"https://ru.wikipedia.org/wiki/Гоминиды"},{"name":"Hominids","ru":"Гоминины","start":7,"end":0,"color":"#6a1b9a","description":"Upright-walking human ancestors.","descRu":"Прямоходящие предки человека.","wikiUrl":"https://en.wikipedia.org/wiki/Hominini","wikiRu":"https://ru.wikipedia.org/wiki/Гоминини"},{"name":"Homo Sapiens","ru":"Человек разумный","start":0.3,"end":0,"color":"#8e24aa","description":"300,000 years on a 4.54-billion-year-old planet.","descRu":"300 000 лет на планете возрастом 4,54 млрд лет.","wikiUrl":"https://en.wikipedia.org/wiki/Homo_sapiens","wikiRu":"https://ru.wikipedia.org/wiki/Человек_разумный"}]`),ws=ps;function gs(t){const e=[];return t.forEach(i=>{e.push({...i,level:"eon"}),(i.eras||[]).forEach(n=>{e.push({...n,level:"era"}),(n.periods||[]).forEach(r=>e.push({...r,level:"period"}))})}),e}function ms(t){const e=[...t].sort((n,r)=>r.start-n.start),i=[];return e.forEach(n=>{let r=!1;for(let a=0;a<i.length;a++)if(!i[a].some(o=>!(n.end>=o.start||n.start<=o.end))){i[a].push(n),n._lane=a,r=!0;break}r||(n._lane=i.length,i.push([n]))}),e}class ks{constructor(e,i){this.g=e.append("g"),this.axisY=i}updateY(e){this.axisY=e}render(e){const i=e.xScale.invert(0),n=e.xScale.invert(e.iW),r=Se().domain([i,n]).range([0,e.iW]),a=r.ticks(Math.min(14,Math.floor(e.iW/110))),o=this.g.selectAll(".grid-line").data(a,s=>String(s));o.enter().append("line").attr("class","grid-line").merge(o).attr("x1",s=>r(s)).attr("x2",s=>r(s)).attr("y1",0).attr("y2",this.axisY).attr("stroke","#141a24").attr("stroke-width",.5),o.exit().remove()}}const ni={en:{title:"HISTORY OF LIFE",hadean:"Hadean",archean:"Archean",proterozoic:"Proterozoic",phanerozoic:"Phanerozoic",reset:"Reset",viewing:"Viewing",fullTimeline:"Full Timeline",annotation:`All of <strong>recorded human history</strong> (~5,000 years) occupies the last <strong>0.00011%</strong> of Earth's story — invisible at this scale.<br><span class="ann-clock">The timeline below maps 4.54 billion years onto a <strong>24-hour clock</strong>. Humans appear at <strong>23:59:59</strong>.</span><br><span class="ann-hint">Scroll to zoom in</span>`,wikiLink:"Read more on Wikipedia &rarr;",youAreHere:"YOU ARE HERE",duration:"Duration",severity:"Severity",speciesLost:"of species lost",clock24:"24-hour clock",clockSpan:"If Earth's history were 24 hours, this spans",clockAt:"If Earth's history were 24 hours, this happens at",clockH:"h",clockM:"m",clockS:"s",to:"to",present:"Present",ga:"Ga",ma:"Ma",ka:"Ka",yearsAgo:"years ago",bilYears:"billion years",milYears:"million years",thouYears:"thousand years",years:"years",kbZoom:"zoom",kbPan:"pan",kbReset:"reset"},ru:{title:"ИСТОРИЯ ЖИЗНИ",hadean:"Катархей",archean:"Архей",proterozoic:"Протерозой",phanerozoic:"Фанерозой",reset:"Сброс",viewing:"Обзор",fullTimeline:"Вся шкала",annotation:'Вся <strong>письменная история человечества</strong> (~5 000 лет) занимает лишь <strong>0,00011%</strong> истории Земли — невидимая на этом масштабе.<br><span class="ann-clock">Шкала ниже сжимает 4,54 млрд лет в <strong>24 часа</strong>. Человек появляется в <strong>23:59:59</strong>.</span><br><span class="ann-hint">Прокрутите для увеличения</span>',wikiLink:"Подробнее в Википедии &rarr;",youAreHere:"ВЫ ЗДЕСЬ",duration:"Длительность",severity:"Масштаб",speciesLost:"видов вымерло",clock24:"24-часовые часы",clockSpan:"Если бы история Земли уместилась в 24 часа, это длится с",clockAt:"Если бы история Земли уместилась в 24 часа, это происходит в",clockH:"ч",clockM:"м",clockS:"с",to:"до",present:"Наше время",ga:"млрд л.н.",ma:"млн л.н.",ka:"тыс. л.н.",yearsAgo:"лет назад",bilYears:"млрд лет",milYears:"млн лет",thouYears:"тыс. лет",years:"лет",kbZoom:"масштаб",kbPan:"сдвиг",kbReset:"сброс"}};let kt="en";function ie(){return kt}function ys(t){kt=t}function b(t){return ni[kt]?.[t]||ni.en[t]||t}function ot(t){return kt==="ru"&&t.ru?t.ru:t.name}function Yi(t){return kt==="ru"&&t.descRu?t.descRu:t.description||""}function vs(t){return kt==="ru"&&t.wikiRu?t.wikiRu:t.wikiUrl||""}function H(t){return t>=1e3?(t/1e3).toFixed(t%1e3===0?0:1)+" "+b("ga"):t>=1?t.toFixed(t>=10?0:1)+" "+b("ma"):t>=.001?(t*1e3).toFixed(0)+" "+b("ka"):t>0?(t*1e6).toFixed(0)+" "+b("yearsAgo"):b("present")}function Ce(t,e){const i=t-e;return i>=1e3?(i/1e3).toFixed(1)+" "+b("bilYears"):i>=1?i.toFixed(i>=10?0:1)+" "+b("milYears"):i>=.001?(i*1e3).toFixed(0)+" "+b("thouYears"):(i*1e6).toFixed(0)+" "+b("years")}function ct(t){const e=(4540-t)/4540*86400,i=String(Math.floor(e/3600)).padStart(2,"0"),n=String(Math.floor(e%3600/60)).padStart(2,"0"),r=String(Math.floor(e%60)).padStart(2,"0");return t<.001?`${i}:${n}:${r}.${String(Math.round(e%1*1e3)).padStart(3,"0")}`:`${i}:${n}:${r}`}function Te(t,e){const i=(t-e)/4540*86400,n=Math.floor(i/3600),r=Math.floor(i%3600/60),a=Math.floor(i%60),o=[];return n>0&&o.push(`${n}${b("clockH")}`),r>0&&o.push(`${r}${b("clockM")}`),(a>0||o.length===0)&&o.push(`${a}${b("clockS")}`),o.join(" ")}class xs{constructor(e,i){this.g=e.append("g").attr("class","axis").attr("transform",`translate(0,${i})`),this.gClock=e.append("g").attr("class","axis-clock").attr("transform",`translate(0,${i})`)}render(e){const i=e.xScale.invert(0),n=e.xScale.invert(e.iW),r=Se().domain([i,n]).range([0,e.iW]),a=Math.min(14,Math.max(4,Math.floor(e.iW/110)));this.g.call(ln(r).tickFormat(l=>H(Math.abs(l.valueOf()))).ticks(a)),this.g.selectAll("text").attr("fill","#c0c8d4"),this.g.selectAll("line, path").attr("stroke","#1c2430");const o=r.ticks(a),s=this.gClock.selectAll(".clock-label").data(o,l=>String(l));s.enter().append("text").attr("class","clock-label").merge(s).attr("x",l=>r(l)).attr("y",32).attr("text-anchor","middle").attr("fill","#d4a54a").attr("opacity",.95).attr("font-size","12px").attr("font-family","'DM Sans', system-ui, sans-serif").attr("font-weight","500").attr("letter-spacing","0.03em").text(l=>ct(Math.abs(l))),s.exit().remove()}updateY(e){this.g.attr("transform",`translate(0,${e})`),this.gClock.attr("transform",`translate(0,${e})`)}}class _s{constructor(e,i){this.grp=e.append("g").attr("class","yah"),this.grp.append("circle").attr("class","you-are-here-pulse").attr("cy",i/2),this.grp.append("circle").attr("cy",i/2).attr("r",5).attr("fill","#d4a54a"),this.label=this.grp.append("text").attr("y",-6).attr("text-anchor","end").attr("fill","#d4a54a").attr("font-size","10px").attr("font-weight","700")}render(e){this.grp.attr("transform",`translate(${e.xScale(0)},0)`),this.label.text(b("youAreHere"))}}function ge(t){const e=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16);return(.299*e+.587*i+.114*n)/255>.5?"#1a1820":"#f0ece4"}class ne{constructor(e,i,n,r,a,o,s,l,u){this.onHover=o,this.onMove=s,this.onLeave=l,this.onClick=u,this.g=e.append("g"),this.data=i,this.y=n,this.h=r,this.cls=a}render(e){const{xScale:i}=e,n=e.iW,r=this.g.selectAll(`.${this.cls}`).data(this.data,s=>s.name),a=r.enter().append("g").attr("class",this.cls);a.append("rect").attr("class","geo-bar"),a.append("text").attr("class","geo-label"),a.select("rect").on("mouseover",(s,l)=>this.onHover(s,l)).on("mousemove",s=>this.onMove(s)).on("mouseout",()=>this.onLeave()).on("click",(s,l)=>{s.stopPropagation(),this.onClick(s,l)});const o=a.merge(r);o.select("rect").attr("x",s=>i(s.start)).attr("y",this.y).attr("width",s=>Math.max(0,i(s.end)-i(s.start))).attr("height",this.h).attr("fill",s=>s.color),o.select("text").attr("x",s=>{const l=Math.max(0,i(s.start)),u=Math.min(n,i(s.end));return(l+u)/2}).attr("y",this.y+this.h/2).attr("fill",s=>ge(s.color)).style("font-size",this.h>=40?"14px":this.h>=30?"13px":"11px").text(s=>{const l=ot(s),u=Math.max(0,i(s.start)),h=Math.min(n,i(s.end))-u;return h<28?"":h<55?l.slice(0,4):h<90&&l.length>10?l.slice(0,9)+"…":l}),r.exit().remove()}clear(){this.g.selectAll("*").remove()}}class bs{constructor(e,i,n,r,a,o,s){this.onHover=r,this.onMove=a,this.onLeave=o,this.onClick=s,this.g=e.append("g"),this.data=i.filter(l=>l.type==="extinction"),this.axisY=n}updateY(e){this.axisY=e}render(e){const i=Math.max(4,Math.min(40,6*Math.sqrt(e.curT.k))),n=this.g.selectAll(".extinction-band").data(this.data,a=>a.name);n.enter().append("rect").attr("class","extinction-band").attr("filter","url(#glow)").on("mouseover",(a,o)=>this.onHover(a,o)).on("mousemove",a=>this.onMove(a)).on("mouseout",()=>this.onLeave()).on("click",(a,o)=>{a.stopPropagation(),this.onClick(a,o)}).merge(n).attr("x",a=>e.xScale(a.date)-i/2).attr("y",0).attr("width",i).attr("height",this.axisY).attr("fill","#e03e3e").attr("opacity",a=>(a.severity||50)/100*.28).attr("rx",i/3),n.exit().remove()}}const re=new Set(["Formation of Earth","Origin of Life","Great Oxidation Event","Cambrian Explosion","First Dinosaurs","Homo Sapiens","First Eukaryotes","First Animals"]);class Rs{constructor(e,i,n,r,a,o,s,l){this.onHover=a,this.onMove=o,this.onLeave=s,this.onClick=l,this.g=e.append("g"),this.data=i,this.evtY=n,this.axisY=r}updateY(e,i){this.evtY=e,this.axisY=i}render(e){const i=e.curT.k,n=this.data.filter(u=>u.type==="extinction"?!1:re.has(u.name)?!0:i>=2).map(u=>({...u,_row:0})),r=[];n.forEach(u=>{const c=e.xScale(u.date);let h=0;for(;r.some(f=>f.row===h&&Math.abs(f.px-c)<95);)h++;r.push({px:c,row:h}),u._row=h});const a=u=>u.type==="origin"?"#4ec98a":"#e0a040",o=this.g.selectAll(".event-marker").data(n,u=>u.name),s=o.enter().append("g").attr("class","event-marker").on("mouseover",(u,c)=>this.onHover(u,c)).on("mousemove",u=>this.onMove(u)).on("mouseout",()=>this.onLeave()).on("click",(u,c)=>{u.stopPropagation(),this.onClick(u,c)});s.append("line").attr("class","event-line"),s.append("circle").attr("class","event-dot"),s.append("text").attr("class","event-text");const l=s.merge(o);l.attr("transform",u=>`translate(${e.xScale(u.date)},0)`),l.select(".event-line").attr("y1",this.evtY).attr("y2",this.axisY).attr("stroke",a).attr("opacity",.18),l.select(".event-dot").attr("cy",this.evtY).attr("r",u=>re.has(u.name)?5:3.5).attr("fill",a).attr("stroke","#0c1018").attr("stroke-width",1.5),l.select(".event-text").attr("x",0).attr("y",u=>this.evtY-8-u._row*15).attr("text-anchor","middle").attr("fill",a).attr("font-size","14px").attr("font-weight","600").attr("opacity",u=>re.has(u.name)?.9:.7).text(u=>{const c=ot(u),h=i>10?30:i>3?22:16;return c.length>h?c.slice(0,h-1)+"…":c}),o.exit().remove()}}class Es{constructor(e,i,n,r,a,o,s,l,u){this.onHover=o,this.onMove=s,this.onLeave=l,this.onClick=u,this.g=e.append("g"),this.data=i,this.spY=n,this.spLane=r,this.spGap=a}render(e){const i=this.g.selectAll(".sp-group").data(this.data,a=>a.name),n=i.enter().append("g").attr("class","sp-group").on("mouseover",(a,o)=>this.onHover(a,o)).on("mousemove",a=>this.onMove(a)).on("mouseout",()=>this.onLeave()).on("click",(a,o)=>{a.stopPropagation(),this.onClick(a,o)});n.append("rect").attr("class","species-bar"),n.append("text").attr("class","species-label"),n.append("text").attr("class","species-duration");const r=n.merge(i);r.select("rect").attr("x",a=>e.xScale(a.start)).attr("y",a=>this.spY+(a._lane||0)*(this.spLane+this.spGap)).attr("width",a=>Math.max(4,e.xScale(a.end)-e.xScale(a.start))).attr("height",this.spLane).attr("fill",a=>a.color).attr("opacity",1).attr("stroke","rgba(255,255,255,0.08)").attr("stroke-width",.5),r.select("text").attr("x",a=>Math.max(0,e.xScale(a.start))+5).attr("y",a=>this.spY+(a._lane||0)*(this.spLane+this.spGap)+this.spLane/2).attr("fill",a=>ge(a.color)).text(a=>{const o=ot(a),s=Math.max(0,e.xScale(a.start)),u=Math.min(e.iW,e.xScale(a.end))-s;return u<35?"":u<70?o.slice(0,6)+(o.length>6?"…":""):o}).attr("font-size","13px").attr("dominant-baseline","central").attr("opacity",1),r.select(".species-duration").attr("x",a=>Math.min(e.iW,e.xScale(a.end))-5).attr("y",a=>this.spY+(a._lane||0)*(this.spLane+this.spGap)+this.spLane/2).attr("fill",a=>ge(a.color)).attr("text-anchor","end").attr("font-size","11px").attr("dominant-baseline","central").attr("opacity",.7).text(a=>{const o=Math.max(0,e.xScale(a.start)),l=Math.min(e.iW,e.xScale(a.end))-o;if(l<120)return"";const u=Ce(a.start,a.end),c=Te(a.start,a.end);return l<220?u:`${u} (${c})`}),i.exit().remove()}}class Ms{constructor(){this.el=document.getElementById("tooltip"),this.ttTitle=this.el.querySelector(".tt-title"),this.ttDate=this.el.querySelector(".tt-date"),this.ttClock=this.el.querySelector(".tt-clock"),this.ttDesc=this.el.querySelector(".tt-desc")}show(e,i,n){if(this.ttTitle.textContent=ot(i),n==="geo"||n==="species"){const r=i;this.ttDate.textContent=`${H(r.start)} → ${H(r.end)} (${Ce(r.start,r.end)})`,this.ttClock.textContent=`🕐 ${ct(r.start)} → ${ct(r.end)} (${Te(r.start,r.end)})`}else{const r=i;let a=H(r.date);r.severity&&(a+=` | ${r.severity}% ${b("speciesLost")}`),this.ttDate.textContent=a,this.ttClock.textContent=`🕐 ${ct(r.date)}`}this.ttDesc.textContent=Yi(i),this.el.classList.add("visible"),this.move(e)}move(e){let i=e.clientX+14,n=e.clientY-8;i+this.el.offsetWidth>window.innerWidth&&(i=e.clientX-this.el.offsetWidth-10),n+this.el.offsetHeight>window.innerHeight&&(n=e.clientY-this.el.offsetHeight-10),this.el.style.left=i+"px",this.el.style.top=n+"px"}hide(){this.el.classList.remove("visible")}}class As{constructor(){this.el=document.getElementById("info-panel"),this.titleEl=this.el.querySelector(".panel-title"),this.datesEl=this.el.querySelector(".panel-dates"),this.durationEl=this.el.querySelector(".panel-duration"),this.descEl=this.el.querySelector(".panel-desc"),this.perspEl=this.el.querySelector(".panel-perspective"),this.linkEl=this.el.querySelector(".panel-link"),this.el.querySelector(".panel-close").addEventListener("click",e=>{e.stopPropagation(),this.close()})}show(e,i){if(this.titleEl.textContent=ot(e),i==="geo"||i==="species"){const r=e;this.datesEl.textContent=`${H(r.start)} → ${H(r.end)}`,this.durationEl.textContent=`${b("duration")}: ${Ce(r.start,r.end)}`,this.perspEl.innerHTML=`<strong>${b("clock24")}:</strong> ${b("clockSpan")} <strong>${ct(r.start)}</strong> ${b("to")} <strong>${ct(r.end)}</strong> (${Te(r.start,r.end)}).`}else{const r=e;this.datesEl.textContent=H(r.date),this.durationEl.textContent=r.severity?`${b("severity")}: ~${r.severity}% ${b("speciesLost")}`:"",this.perspEl.innerHTML=`<strong>${b("clock24")}:</strong> ${b("clockAt")} <strong>${ct(r.date)}</strong>.`}this.descEl.textContent=Yi(e);const n=vs(e);n?(this.linkEl.href=n,this.linkEl.style.display="",this.linkEl.innerHTML=b("wikiLink")):this.linkEl.style.display="none",this.el.classList.add("open")}close(){this.el.classList.remove("open")}}class Ss{constructor(e,i,n){this.onEonClick=e,this.onReset=i,this.onLangToggle=n,this.eonButtons=document.querySelectorAll(".nav-btn[data-eon]"),this.resetBtn=document.getElementById("btn-reset"),this.langBtn=document.getElementById("btn-lang"),this.ctxEl=document.getElementById("context-indicator"),this.titleEl=document.getElementById("nav-title"),this.eonButtons.forEach(r=>{r.addEventListener("click",()=>{r.dataset.eon&&this.onEonClick(r.dataset.eon)})}),this.resetBtn.addEventListener("click",()=>this.onReset()),this.langBtn.addEventListener("click",()=>{ys(ie()==="en"?"ru":"en"),this.onLangToggle()})}updateLangUI(){document.title=ie()==="ru"?"История жизни на Земле":"History of Life on Earth",this.titleEl.textContent=b("title"),document.getElementById("btn-hadean").textContent=b("hadean"),document.getElementById("btn-archean").textContent=b("archean"),document.getElementById("btn-proterozoic").textContent=b("proterozoic"),document.getElementById("btn-phanerozoic").textContent=b("phanerozoic"),this.resetBtn.textContent=b("reset"),this.langBtn.textContent=ie()==="en"?"RU":"EN"}updateContext(e,i,n,r){const a=e.xScale.invert(e.iW/2),o=e.curT.k;let s=b("fullTimeline"),l=`4.54 ${b("ga")} – ${b("present")}`;if(o>=3){const u=r.find(c=>a<=c.start&&a>=c.end);u&&(s=ot(u),l=`${H(u.start)} – ${H(u.end)}`)}if(s===b("fullTimeline")&&o>=1.5){const u=n.find(c=>a<=c.start&&a>=c.end);u&&(s=ot(u),l=`${H(u.start)} – ${H(u.end)}`)}if(s===b("fullTimeline")){const u=i.find(c=>a<=c.start&&a>=c.end);u&&(s=ot(u),l=`${H(u.start)} – ${H(u.end)}`)}this.ctxEl.innerHTML=`${b("viewing")}: <span>${s}</span> | ${l}`,this.eonButtons.forEach(u=>{const c=i.find(f=>f.name===u.dataset.eon);if(!c)return;const h=e.xScale(c.start)<e.iW&&e.xScale(c.end)>0;u.classList.toggle("active",o>1.3&&h&&e.xScale(c.end)-e.xScale(c.start)>e.iW*.35)})}}const J={top:16,right:30,bottom:40,left:30},me=50,Di=34,ri=26,Oi=3,Cs=0,qi=me+Oi,ai=qi+Di+Oi,oi=34,si=6;class Ts{constructor(){this.curT=dt,this.W=0,this.H=0,this.iW=0,this.iH=0,this.evtY=0,this.evtH=0,this.spY=0,this.axisY=0,this.container=document.getElementById("timeline-container"),this.annotation=document.getElementById("opening-annotation"),this.kbHint=document.getElementById("keyboard-hint");const e=gs(fs);this.eons=e.filter(i=>i.level==="eon"),this.eras=e.filter(i=>i.level==="era"),this.periods=e.filter(i=>i.level==="period"),this.speciesArr=ms(ws),this.tooltip=new Ms,this.infoPanel=new As,this.navBar=new Ss(i=>{const n=this.eons.find(r=>r.name===i);n&&this.zoomTo(n.start,n.end)},()=>{this.svg.transition().duration(750).call(this.zoom.transform,dt),this.infoPanel.close()},()=>this.updateLangUI()),this.init(),this.setupKeyboard(),this.setupResize(),this.updateLangUI()}dims(){const e=this.container.getBoundingClientRect();this.W=e.width,this.H=e.height,this.iW=this.W-J.left-J.right,this.iH=this.H-J.top-J.bottom}computeLayout(){this.spY=ai+ri+10;const e=this.speciesArr.reduce((n,r)=>Math.max(n,r._lane||0),0),i=this.spY+(e+1)*(oi+si);this.axisY=this.iH-10,this.evtY=Math.round((i+12+this.axisY)/2),this.evtH=this.axisY-this.evtY}init(){this.dims(),this.computeLayout(),this.svg=at(this.container).append("svg").attr("width",this.W).attr("height",this.H);const e=this.svg.append("defs");e.append("clipPath").attr("id","clip").append("rect").attr("width",this.iW).attr("height",this.iH+J.top+J.bottom);const i=e.append("filter").attr("id","glow").attr("x","-50%").attr("y","-20%").attr("width","200%").attr("height","140%");i.append("feGaussianBlur").attr("stdDeviation","4").attr("result","blur"),i.append("feMerge").selectAll("feMergeNode").data(["blur","SourceGraphic"]).enter().append("feMergeNode").attr("in",h=>h),this.g=this.svg.append("g").attr("transform",`translate(${J.left},${J.top})`).attr("clip-path","url(#clip)"),this.xBase=Ii().exponent(.5).domain([4540,0]).range([0,this.iW]),this.xScale=this.xBase.copy();const n=(h,f)=>this.tooltip.show(h,f,"geo"),r=h=>this.tooltip.move(h),a=()=>this.tooltip.hide(),o=(h,f)=>{this.zoomTo(f.start,f.end),this.infoPanel.show(f,"geo")},s=(h,f)=>this.tooltip.show(h,f,"event"),l=(h,f)=>this.infoPanel.show(f,"event"),u=(h,f)=>this.tooltip.show(h,f,"species"),c=(h,f)=>this.infoPanel.show(f,"species");this.grid=new ks(this.g,this.axisY),this.extinctions=new bs(this.g,ii,this.axisY,s,r,a,l),this.eonLayer=new ne(this.g,this.eons,Cs,me,"eon-g",n,r,a,o),this.eraLayer=new ne(this.g,this.eras,qi,Di,"era-g",n,r,a,o),this.perLayer=new ne(this.g,this.periods,ai,ri,"per-g",n,r,a,o),this.speciesBars=new Es(this.g,this.speciesArr,this.spY,oi,si,u,r,a,c),this.events=new Rs(this.g,ii,this.evtY,this.axisY,s,r,a,l),this.youAreHere=new _s(this.g,me),this.axis=new xs(this.g,this.axisY),this.zoom=cs().scaleExtent([1,1e5]).translateExtent([[0,-10],[this.iW,this.iH+10]]).extent([[0,0],[this.iW,this.iH]]).on("zoom",h=>{this.curT=h.transform,this.xScale=this.curT.rescaleX(this.xBase),this.updateAll(),this.annotation.classList.toggle("hidden",this.curT.k>1.3),this.curT.k>1.1&&(this.kbHint.style.opacity="0")}),this.svg.call(this.zoom),this.svg.on("click",()=>this.infoPanel.close())}ctx(){return{xScale:this.xScale,curT:this.curT,iW:this.iW,iH:this.iH}}updateAll(){const e=this.ctx(),i=this.curT.k;this.eonLayer.render(e),this.eraLayer.render(e),i>=2?this.perLayer.render(e):this.perLayer.clear(),this.grid.render(e),this.extinctions.render(e),this.events.render(e),this.speciesBars.render(e),this.youAreHere.render(e),this.axis.render(e),this.navBar.updateContext(e,this.eons,this.eras,this.periods)}zoomTo(e,i,n=750){const r=this.xBase(e),o=this.xBase(i)-r;if(o<=0)return;const s=this.iW*.04,l=(this.iW-2*s)/o,u=-r*l+s;this.svg.transition().duration(n).call(this.zoom.transform,dt.translate(u,0).scale(l))}updateLangUI(){this.navBar.updateLangUI(),this.annotation.innerHTML=b("annotation"),this.kbHint.innerHTML=`<kbd>+</kbd><kbd>-</kbd> ${b("kbZoom")} &nbsp;<kbd>&larr;</kbd><kbd>&rarr;</kbd> ${b("kbPan")} &nbsp;<kbd>Home</kbd> ${b("kbReset")} &nbsp;<kbd>1</kbd>-<kbd>4</kbd>`,this.updateAll()}setupKeyboard(){document.addEventListener("keydown",e=>{const i=this.iW*.15;switch(e.key){case"+":case"=":this.svg.transition().duration(300).call(this.zoom.scaleBy,2);break;case"-":case"_":this.svg.transition().duration(300).call(this.zoom.scaleBy,.5);break;case"ArrowLeft":this.svg.transition().duration(200).call(this.zoom.translateBy,i,0);break;case"ArrowRight":this.svg.transition().duration(200).call(this.zoom.translateBy,-i,0);break;case"Home":this.svg.transition().duration(750).call(this.zoom.transform,dt),this.infoPanel.close();break;case"1":{const n=this.eons.find(r=>r.name==="Hadean");n&&this.zoomTo(n.start,n.end);break}case"2":{const n=this.eons.find(r=>r.name==="Archean");n&&this.zoomTo(n.start,n.end);break}case"3":{const n=this.eons.find(r=>r.name==="Proterozoic");n&&this.zoomTo(n.start,n.end);break}case"4":{const n=this.eons.find(r=>r.name==="Phanerozoic");n&&this.zoomTo(n.start,n.end);break}case"Escape":this.infoPanel.close();break}})}setupResize(){window.addEventListener("resize",()=>{this.dims(),this.computeLayout(),this.svg.attr("width",this.W).attr("height",this.H),this.xBase.range([0,this.iW]),this.svg.select("#clip rect").attr("width",this.iW).attr("height",this.iH+J.top+J.bottom),this.axis.updateY(this.axisY),this.grid.updateY(this.axisY),this.extinctions.updateY(this.axisY),this.events.updateY(this.evtY,this.axisY),this.zoom.translateExtent([[0,-10],[this.iW,this.iH+10]]).extent([[0,0],[this.iW,this.iH]]),this.xScale=this.curT.rescaleX(this.xBase),this.updateAll()})}}new Ts;</script>
  <style rel="stylesheet" crossorigin>*,*:before,*:after{margin:0;padding:0;box-sizing:border-box}:root{--fs-caption: .6875rem;--fs-small: .75rem;--fs-base: .875rem;--fs-lead: 1rem;--fs-title: 1.125rem;--fs-display: 1.3125rem;--lh-tight: 1.25;--lh-normal: 1.5;--lh-relaxed: 1.65;--bg-deep: #0c1018;--bg-surface: rgba(12, 16, 24, .96);--bg-elevated: rgba(16, 22, 34, .97);--accent: #d4a54a;--accent-bright: #e8c06a;--accent-dim: rgba(212, 165, 74, .15);--accent-border: rgba(212, 165, 74, .22);--accent-glow: rgba(212, 165, 74, .08);--text-primary: #e8e0d4;--text-secondary: #a09888;--text-muted: #6b6258;--text-faint: #4a4038;--extinction-red: #e03e3e;--origin-green: #4ec98a;--event-amber: #e0a040;--border-subtle: rgba(212, 165, 74, .12);--border-medium: rgba(212, 165, 74, .25);--grid-line: #141a24;--axis-line: #1c2430;--axis-text: #c0c8d4;--font-display: "DM Sans", "Segoe UI", system-ui, sans-serif;--font-body: "DM Sans", "Segoe UI", system-ui, sans-serif}html{font-size:16px}body{background:var(--bg-deep);color:var(--text-primary);font-family:var(--font-body);font-size:var(--fs-base);line-height:var(--lh-normal);overflow:hidden;height:100vh;width:100vw;user-select:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#nav-bar{position:fixed;top:0;left:0;right:0;height:3rem;background:var(--bg-surface);backdrop-filter:blur(12px);border-bottom:1px solid var(--border-subtle);display:flex;align-items:center;padding:0 1.25rem;gap:.5rem;z-index:100}.nav-title{font-family:var(--font-display);font-size:var(--fs-lead);color:var(--accent);margin-right:.875rem;white-space:nowrap;letter-spacing:.02em}.nav-btn{background:var(--accent-glow);border:1px solid var(--accent-border);color:var(--text-secondary);padding:.3125rem .75rem;border-radius:.3125rem;font-family:var(--font-body);font-size:var(--fs-small);font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap;letter-spacing:.01em}.nav-btn:hover{background:var(--accent-dim);color:var(--text-primary);border-color:#d4a54a66}.nav-btn.active{background:#d4a54a33;color:var(--accent-bright);border-color:var(--accent)}.nav-btn.reset-btn{background:#e0a0400f;border-color:#e0a04033;color:var(--event-amber)}.nav-btn.reset-btn:hover{background:#e0a04026}.nav-btn.lang-btn{background:#d4a54a1a;border-color:#d4a54a4d;color:var(--accent);font-weight:600;letter-spacing:.08em;padding:.3125rem .625rem}.nav-btn.lang-btn:hover{background:#d4a54a38}#context-indicator{margin-left:auto;font-size:var(--fs-small);color:var(--text-muted);white-space:nowrap;letter-spacing:.01em}#context-indicator span{color:var(--accent);font-weight:500}#timeline-container{position:absolute;top:3rem;left:0;right:0;bottom:0;overflow:hidden;cursor:grab}#timeline-container:active{cursor:grabbing}#opening-annotation{position:fixed;bottom:1.75rem;left:50%;transform:translate(-50%);background:var(--bg-elevated);border:1px solid var(--border-subtle);border-radius:.75rem;padding:1.375rem 2.125rem 1.25rem;font-family:var(--font-body);font-size:var(--fs-lead);color:var(--text-secondary);text-align:center;max-width:45rem;z-index:50;opacity:1;transition:opacity .5s;pointer-events:none;line-height:var(--lh-relaxed);letter-spacing:.01em;box-shadow:0 .375rem 2rem #0006}#opening-annotation strong{color:var(--accent);font-weight:600}#opening-annotation .ann-clock{display:block;margin-top:.5rem;font-size:var(--fs-base);color:var(--text-muted);line-height:var(--lh-normal)}#opening-annotation .ann-clock strong{color:var(--accent-bright)}#opening-annotation .ann-hint{display:block;margin-top:.625rem;font-size:var(--fs-small);color:var(--text-faint);letter-spacing:.06em;text-transform:uppercase}#opening-annotation.hidden{opacity:0}#tooltip{position:fixed;pointer-events:none;background:var(--bg-elevated);border:1px solid var(--border-medium);border-radius:.5rem;padding:.75rem 1rem;font-size:var(--fs-base);line-height:var(--lh-normal);color:var(--text-primary);max-width:26rem;z-index:200;opacity:0;transition:opacity .12s;box-shadow:0 .5rem 2rem #0000008c,0 0 0 1px #d4a54a0f}#tooltip.visible{opacity:1}.tt-title{font-family:var(--font-display);font-size:var(--fs-title);color:var(--accent-bright);line-height:var(--lh-tight);margin-bottom:.3125rem}.tt-date{color:var(--text-muted);font-size:var(--fs-small);font-weight:500;letter-spacing:.02em}.tt-clock{color:var(--accent-bright);font-size:var(--fs-small);font-weight:500;opacity:.7;margin-top:.15rem}.tt-desc{margin-top:.375rem;color:var(--text-secondary);font-size:var(--fs-base);line-height:var(--lh-normal)}#info-panel{position:fixed;bottom:0;left:0;right:0;background:var(--bg-elevated);backdrop-filter:blur(14px);border-top:2px solid var(--accent-border);padding:1.25rem 2rem 1.5rem;z-index:150;transform:translateY(100%);transition:transform .3s cubic-bezier(.4,0,.2,1);max-height:40vh;overflow-y:auto}#info-panel.open{transform:translateY(0)}.panel-header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:.625rem}.panel-title{font-family:var(--font-display);font-size:var(--fs-display);color:var(--text-primary);line-height:var(--lh-tight);letter-spacing:-.01em}.panel-close{background:none;border:1px solid rgba(255,255,255,.1);color:var(--text-muted);font-size:var(--fs-lead);cursor:pointer;padding:.125rem .5rem;border-radius:.3125rem;line-height:1;transition:all .15s}.panel-close:hover{color:var(--text-primary);border-color:#ffffff40}.panel-dates{font-size:var(--fs-base);font-weight:500;color:var(--accent);margin-bottom:.25rem;letter-spacing:.01em}.panel-duration{font-size:var(--fs-small);color:var(--text-muted);margin-bottom:.75rem}.panel-desc{font-size:var(--fs-base);color:var(--text-secondary);line-height:var(--lh-relaxed);margin-bottom:.875rem;letter-spacing:.01em}.panel-perspective{background:var(--accent-glow);border-left:3px solid var(--accent);padding:.75rem 1rem;border-radius:0 .5rem .5rem 0;font-size:var(--fs-base);color:var(--text-secondary);margin-bottom:.875rem;line-height:var(--lh-normal)}.panel-perspective strong{color:var(--accent-bright);font-weight:600}.panel-link{display:inline-block;color:var(--accent);text-decoration:none;font-size:var(--fs-small);font-weight:500;letter-spacing:.02em;border:1px solid var(--accent-border);padding:.375rem .875rem;border-radius:.3125rem;transition:all .2s}.panel-link:hover{background:var(--accent-dim)}@keyframes pulse-ring{0%{r:5;opacity:.65}to{r:20;opacity:0}}.you-are-here-pulse{animation:pulse-ring 2.2s ease-out infinite;fill:none;stroke:var(--accent);stroke-width:1.5}.geo-bar{cursor:pointer;stroke:#0000004d;stroke-width:.5;transition:filter .15s}.geo-bar:hover{filter:brightness(1.12) saturate(1.1)}.geo-label{font-family:var(--font-body);font-weight:600;pointer-events:none;text-anchor:middle;dominant-baseline:central;letter-spacing:.02em}.event-marker{cursor:pointer}.event-line{stroke-width:1;opacity:.4}.extinction-band{pointer-events:all;cursor:pointer}.species-bar{cursor:pointer;rx:4;ry:4;transition:filter .15s}.species-bar:hover{filter:brightness(1.25) saturate(1.1)}.species-label{fill:var(--text-primary);pointer-events:none;font-family:var(--font-body);font-weight:500;letter-spacing:.01em}.axis line,.axis path{stroke:var(--axis-line)}.axis text{fill:var(--axis-text);font-family:var(--font-body);font-size:11px;font-weight:500}#keyboard-hint{position:fixed;bottom:.625rem;right:1rem;font-size:var(--fs-caption);color:var(--text-faint);z-index:50;pointer-events:none;transition:opacity .3s;letter-spacing:.02em}#keyboard-hint kbd{background:#ffffff08;border:1px solid rgba(255,255,255,.07);border-radius:.1875rem;padding:.0625rem .3125rem;font-family:var(--font-body);font-size:var(--fs-caption)}::-webkit-scrollbar{width:.375rem}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#d4a54a1f;border-radius:.1875rem}</style>
</head>
<body>

<div id="nav-bar">
  <span class="nav-title" id="nav-title">HISTORY OF LIFE</span>
  <button class="nav-btn" data-eon="Hadean" id="btn-hadean">Hadean</button>
  <button class="nav-btn" data-eon="Archean" id="btn-archean">Archean</button>
  <button class="nav-btn" data-eon="Proterozoic" id="btn-proterozoic">Proterozoic</button>
  <button class="nav-btn" data-eon="Phanerozoic" id="btn-phanerozoic">Phanerozoic</button>
  <button class="nav-btn reset-btn" id="btn-reset">Reset</button>
  <button class="nav-btn lang-btn" id="btn-lang">RU</button>
  <div id="context-indicator"></div>
</div>

<div id="timeline-container"></div>
<div id="opening-annotation"></div>

<div id="tooltip">
  <div class="tt-title"></div>
  <div class="tt-date"></div>
  <div class="tt-clock"></div>
  <div class="tt-desc"></div>
</div>

<div id="info-panel">
  <div class="panel-header">
    <div class="panel-title"></div>
    <button class="panel-close">&times;</button>
  </div>
  <div class="panel-dates"></div>
  <div class="panel-duration"></div>
  <div class="panel-desc"></div>
  <div class="panel-perspective"></div>
  <a class="panel-link" href="#" target="_blank" rel="noopener"></a>
</div>

<div id="keyboard-hint">
  <kbd>+</kbd><kbd>-</kbd> zoom &nbsp;<kbd>&larr;</kbd><kbd>&rarr;</kbd> pan &nbsp;<kbd>Home</kbd> reset &nbsp;<kbd>1</kbd>-<kbd>4</kbd>
</div>

</body>
</html>
